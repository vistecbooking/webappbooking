2019-08-19T10:38:53+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:38:53+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:38:53+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:38:53+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:40:33+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:40:33+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-09-28 09:00:00' AND ri.start_date <= '2019-09-28 17:00:00') OR
					(ri.end_date >= '2019-09-28 09:00:00' AND ri.end_date <= '2019-09-28 17:00:00') OR
					(ri.start_date <= '2019-09-28 09:00:00' AND ri.end_date >= '2019-09-28 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-08-19T10:40:33+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-08-19T10:40:33+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series (date_created, title, owner_id, repeat_type, repeat_options, announce_id) VALUES ('2019-08-19 10:40:33', 'Electrical shut down', '544', 'none', '', '80');
2019-08-19T10:40:33+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('97', '10');
2019-08-19T10:40:33+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_instances (start_date, end_date, blackout_series_id)
		VALUES ('2019-09-28 09:00:00', '2019-09-28 17:00:00', '97');
2019-08-19T10:40:34+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:40:34+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:40:34+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:40:34+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:40:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:41:34+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:41:56+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:41:56+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:41:56+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:41:56+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:42:00+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:42:24+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:42:36+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:43:19+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:43:19+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:43:19+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:43:19+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-08-19T10:43:29+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:43:35+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:43:35+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:43:35+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:43:35+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-08-19T10:43:53+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:43:57+07:00 [16913] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:43:57+07:00 [16913] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:43:57+07:00 [16913] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:43:57+07:00 [16913] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:44:03+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:44:12+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:44:12+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:44:12+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:44:12+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-08-19T10:44:12+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-08-19T10:44:12+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-08-19T10:44:12+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:44:13+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-08-19T10:44:13+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-08-19T10:44:13+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-08-19T10:44:16+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-08-19T10:44:20+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-08-19T10:44:27+07:00 [16795] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-08-19T10:44:32+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '97';
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '97'
		ORDER BY r.name;
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-09-28 09:00:00' AND ri.start_date <= '2019-09-28 17:00:00') OR
					(ri.end_date >= '2019-09-28 09:00:00' AND ri.end_date <= '2019-09-28 17:00:00') OR
					(ri.start_date <= '2019-09-28 09:00:00' AND ri.end_date >= '2019-09-28 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: DELETE blackout_series FROM blackout_series
		INNER JOIN blackout_instances ON blackout_series.blackout_series_id = blackout_instances.blackout_series_id
		WHERE blackout_instance_id = '97';
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series (date_created, title, owner_id, repeat_type, repeat_options, announce_id) VALUES ('2019-08-19 10:44:36', 'Electrical shut down', '544', 'none', '', '80');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('98', '10');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('98', '17');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('98', '9');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('98', '23');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('98', '18');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('98', '7');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('98', '26');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('98', '22');
2019-08-19T10:44:36+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_instances (start_date, end_date, blackout_series_id)
		VALUES ('2019-09-28 09:00:00', '2019-09-28 17:00:00', '98');
2019-08-19T10:44:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:44:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:44:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:44:38+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '98';
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '98';
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '98'
		ORDER BY r.name;
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:44:52+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:44:53+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:44:53+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:44:53+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:44:53+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '98';
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '98';
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '98'
		ORDER BY r.name;
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:45:07+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '98';
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '98';
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '98'
		ORDER BY r.name;
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:45:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '98';
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '98';
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '98'
		ORDER BY r.name;
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-09-28 09:00:00' AND ri.start_date <= '2019-09-28 17:00:00') OR
					(ri.end_date >= '2019-09-28 09:00:00' AND ri.end_date <= '2019-09-28 17:00:00') OR
					(ri.start_date <= '2019-09-28 09:00:00' AND ri.end_date >= '2019-09-28 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: DELETE blackout_series FROM blackout_series
		INNER JOIN blackout_instances ON blackout_series.blackout_series_id = blackout_instances.blackout_series_id
		WHERE blackout_instance_id = '98';
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series (date_created, title, owner_id, repeat_type, repeat_options, announce_id) VALUES ('2019-08-19 10:45:24', 'Electrical shut down', '544', 'none', '', '80');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '10');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '17');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '9');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '23');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '18');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '7');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '26');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '22');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '15');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '11');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '13');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('99', '12');
2019-08-19T10:45:24+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_instances (start_date, end_date, blackout_series_id)
		VALUES ('2019-09-28 09:00:00', '2019-09-28 17:00:00', '99');
2019-08-19T10:45:26+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:45:26+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:45:27+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:45:27+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '99';
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '99';
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '99'
		ORDER BY r.name;
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:45:29+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '99';
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '99';
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '99'
		ORDER BY r.name;
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:45:47+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '99';
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '99';
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '99'
		ORDER BY r.name;
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:45:50+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '99';
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '99';
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '99'
		ORDER BY r.name;
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-09-28 09:00:00' AND ri.start_date <= '2019-09-28 17:00:00') OR
					(ri.end_date >= '2019-09-28 09:00:00' AND ri.end_date <= '2019-09-28 17:00:00') OR
					(ri.start_date <= '2019-09-28 09:00:00' AND ri.end_date >= '2019-09-28 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: DELETE blackout_series FROM blackout_series
		INNER JOIN blackout_instances ON blackout_series.blackout_series_id = blackout_instances.blackout_series_id
		WHERE blackout_instance_id = '99';
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series (date_created, title, owner_id, repeat_type, repeat_options, announce_id) VALUES ('2019-08-19 10:45:58', 'Electrical shut down', '544', 'none', '', '80');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '10');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '17');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '9');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '23');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '18');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '7');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '26');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '22');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '15');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '11');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '13');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '12');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '24');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '14');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '28');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '29');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('100', '8');
2019-08-19T10:45:58+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_instances (start_date, end_date, blackout_series_id)
		VALUES ('2019-09-28 09:00:00', '2019-09-28 17:00:00', '100');
2019-08-19T10:45:59+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:45:59+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:45:59+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:45:59+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '100';
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '100';
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '100'
		ORDER BY r.name;
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:46:01+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:02+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:46:02+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:02+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:46:02+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '100';
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '100';
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '100'
		ORDER BY r.name;
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:46:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '100';
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '100';
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '100'
		ORDER BY r.name;
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:46:13+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:14+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:46:14+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:14+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:46:14+07:00 [16782] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 20;
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '100';
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '100';
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '100'
		ORDER BY r.name;
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-09-28 09:00:00' AND ri.start_date <= '2019-09-28 17:00:00') OR
					(ri.end_date >= '2019-09-28 09:00:00' AND ri.end_date <= '2019-09-28 17:00:00') OR
					(ri.start_date <= '2019-09-28 09:00:00' AND ri.end_date >= '2019-09-28 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: DELETE blackout_series FROM blackout_series
		INNER JOIN blackout_instances ON blackout_series.blackout_series_id = blackout_instances.blackout_series_id
		WHERE blackout_instance_id = '100';
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series (date_created, title, owner_id, repeat_type, repeat_options, announce_id) VALUES ('2019-08-19 10:46:18', 'Electrical shut down', '544', 'none', '', '80');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '10');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '17');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '9');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '23');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '18');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '7');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '26');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '22');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '15');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '11');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '13');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '12');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '24');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '14');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '28');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '29');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '19');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '8');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '27');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('101', '16');
2019-08-19T10:46:18+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_instances (start_date, end_date, blackout_series_id)
		VALUES ('2019-09-28 09:00:00', '2019-09-28 17:00:00', '101');
2019-08-19T10:46:20+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:46:20+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:20+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:46:20+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '101';
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '101';
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '101'
		ORDER BY r.name;
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:46:22+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:22+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:46:22+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:22+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:46:22+07:00 [16795] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '101';
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '101';
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '101'
		ORDER BY r.name;
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-08-19T10:46:27+07:00 [16913] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_series bs
		INNER JOIN blackout_instances bi ON bi.blackout_series_id = bs.blackout_series_id
		WHERE blackout_instance_id = '101';
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM blackout_instances WHERE blackout_series_id = '101';
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
		FROM blackout_series_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.blackout_series_id = '101'
		ORDER BY r.name;
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-09-28 09:00:00' AND bi.start_date <= '2019-09-28 17:00:00')
				OR
				(bi.end_date >= '2019-09-28 09:00:00' AND bi.end_date <= '2019-09-28 17:00:00')
				OR
				(bi.start_date <= '2019-09-28 09:00:00' AND bi.end_date >= '2019-09-28 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-09-28 09:00:00' AND ri.start_date <= '2019-09-28 17:00:00') OR
					(ri.end_date >= '2019-09-28 09:00:00' AND ri.end_date <= '2019-09-28 17:00:00') OR
					(ri.start_date <= '2019-09-28 09:00:00' AND ri.end_date >= '2019-09-28 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: DELETE blackout_series FROM blackout_series
		INNER JOIN blackout_instances ON blackout_series.blackout_series_id = blackout_instances.blackout_series_id
		WHERE blackout_instance_id = '101';
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series (date_created, title, owner_id, repeat_type, repeat_options, announce_id) VALUES ('2019-08-19 10:46:40', 'Electrical shut down', '544', 'none', '', '80');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '10');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '17');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '9');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '23');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '18');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '7');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '26');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '22');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '15');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '11');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '13');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '12');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '24');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '14');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '28');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '29');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '19');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '8');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '27');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '16');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '21');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_series_resources (blackout_series_id, resource_id) VALUES ('102', '2');
2019-08-19T10:46:40+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: INSERT INTO blackout_instances (start_date, end_date, blackout_series_id)
		VALUES ('2019-09-28 09:00:00', '2019-09-28 17:00:00', '102');
2019-08-19T10:46:41+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T10:46:41+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T10:46:41+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC) results;
2019-08-19T10:46:41+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT bi.*, r.resource_id, r.name, u.*, bs.description, bs.title, bs.repeat_type, bs.repeat_options, schedules.schedule_id
					FROM blackout_instances bi
					INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
					INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
					INNER JOIN resources r on bsr.resource_id = r.resource_id
					INNER JOIN schedules on r.schedule_id = schedules.schedule_id
					INNER JOIN users u ON u.user_id = bs.owner_id
		 WHERE 1=1 ORDER BY bi.start_date DESC LIMIT 20 OFFSET 0;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name) results;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name LIMIT 10 OFFSET 0;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_status_reasons;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*
		FROM groups g
		INNER JOIN group_roles gr ON g.group_id = gr.group_id
		INNER JOIN roles r ON r.role_id = gr.role_id
		WHERE r.role_level = '3'
		ORDER BY g.name;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T15:45:04+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name) results;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name LIMIT 10 OFFSET 10;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_status_reasons;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*
		FROM groups g
		INNER JOIN group_roles gr ON g.group_id = gr.group_id
		INNER JOIN roles r ON r.role_id = gr.role_id
		WHERE r.role_level = '3'
		ORDER BY g.name;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T15:45:10+07:00 [16795] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT COUNT(*) as total FROM (SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name) results;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name LIMIT 10 OFFSET 20;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_status_reasons;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*
		FROM groups g
		INNER JOIN group_roles gr ON g.group_id = gr.group_id
		INNER JOIN roles r ON r.role_id = gr.role_id
		WHERE r.role_level = '3'
		ORDER BY g.name;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T15:45:15+07:00 [16782] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-08-19T15:45:18+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				u.*
			FROM
				user_resource_permissions urp, resources r, users u
			WHERE
				r.resource_id = '16' AND r.resource_id = urp.resource_id AND u.user_id = urp.user_id AND u.status_id = '1';
2019-08-19T15:45:28+07:00 [16913] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				u.*
			FROM
				user_resource_permissions urp, resources r, users u
			WHERE
				r.resource_id = '16' AND r.resource_id = urp.resource_id AND u.user_id = urp.user_id AND u.status_id = '1';

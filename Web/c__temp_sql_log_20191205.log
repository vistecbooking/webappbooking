2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khptipja' OR email = 'khptipja') AND status_id = 1;
2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'khptipja' OR email = 'khptipja');
2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba91b73a522395bf7bc376626b9e051e67067ac4',
			salt = '0cd9f08c',
			fname = 'Tiphanan',
			lname = 'Janijai',
			email = 'tiphanan.jan@gmail.com',
			username = 'khptipja',
			homepageId = '1',
			last_modified = '2019-12-05 01:24:30',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d086a1114b8a',
			language = 'en_us',
			lastlogin = '2019-12-05 01:24:30',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '559';
2019-12-05T01:24:30+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 01:24:30' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 01:24:30' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:24:30+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba91b73a522395bf7bc376626b9e051e67067ac4',
			salt = '0cd9f08c',
			fname = 'Tiphanan',
			lname = 'Janijai',
			email = 'tiphanan.jan@gmail.com',
			username = 'khptipja',
			homepageId = '1',
			last_modified = '2019-12-05 01:24:31',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d086a1114b8a',
			language = 'en_us',
			lastlogin = '2019-12-05 01:24:30',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '559';
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('559' = -1 OR ru.user_id = '559') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T01:24:31+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T01:24:36+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T01:24:40+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T01:24:41+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T01:24:41+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T01:24:41+07:00 [8833] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T01:24:47+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:25:04+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '7';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '7';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '7';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 09:00:00' AND ri.start_date <= '2019-12-09 16:00:00') OR
					(ri.end_date >= '2019-12-09 09:00:00' AND ri.end_date <= '2019-12-09 16:00:00') OR
					(ri.start_date <= '2019-12-09 09:00:00' AND ri.end_date >= '2019-12-09 16:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('7'))
			ORDER BY ri.start_date ASC;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 09:00:00' AND bi.start_date <= '2019-12-09 16:00:00')
				OR
				(bi.end_date >= '2019-12-09 09:00:00' AND bi.end_date <= '2019-12-09 16:00:00')
				OR
				(bi.start_date <= '2019-12-09 09:00:00' AND bi.end_date >= '2019-12-09 16:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 01:25:07' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 01:25:07' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 01:25:07' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('559' = -1 OR ru.user_id = '559') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 01:25:07', null, null, '0', false, 'none', '', '1', '1', '559', null);
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6471', '7', '1');
2019-12-05T01:25:07+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-09 09:00:00', '2019-12-09 16:00:00', '5de7fa03d9ac9445523874', '6471', null);
2019-12-05T01:25:08+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6432', '559', '1');
2019-12-05T01:25:08+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:25:08+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:25:08+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:25:08+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:25:08+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:25:08+07:00 [2455] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T01:25:13+07:00 [2449] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maokamim' OR email = 'maokamim') AND status_id = 1;
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maokamim' OR email = 'maokamim');
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba9446d1ca625baaec1ff0cf752027ea5e3446d7',
			salt = '18410f10',
			fname = 'Kamonnart',
			lname = 'Imwiset',
			email = '1530307@vistec.ac.th',
			username = 'maokamim',
			homepageId = '1',
			last_modified = '2019-12-05 08:38:41',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f35c775604',
			language = 'en_us',
			lastlogin = '2019-12-05 08:38:41',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '479';
2019-12-05T08:38:41+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T08:38:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T08:41:45+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T08:41:54+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T08:41:59+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T08:42:39+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:42:39+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:42:39+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:42:39+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:42:39+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:42:39+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:42:39+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:42:39+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:42:40+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:42:40+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:42:40+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:42:40+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:42:40+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:42:40+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T08:42:40+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T08:42:40+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T08:43:02+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T08:43:05+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T08:43:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T08:43:27+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T08:43:28+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T08:43:28+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T08:43:28+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpeepo' OR email = 'chwpeepo') AND status_id = 1;
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpeepo' OR email = 'chwpeepo');
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '67ec2befbe398595115b87e0c364ca0e12f4e9f4',
			salt = '2820bc95',
			fname = 'Peerapol',
			lname = 'Pornsetmetakul',
			email = 'Peerapol.p_s18@vistec.ac.th',
			username = 'chwpeepo',
			homepageId = '2',
			last_modified = '2019-12-05 09:23:18',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9308f54ae33',
			language = 'en_us',
			lastlogin = '2019-12-05 09:23:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '416';
2019-12-05T09:23:18+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '416';
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T09:23:18+07:00 [2449] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '416';
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T09:23:23+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T09:23:24+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T09:23:24+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T09:23:24+07:00 [8833] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwsunas' OR email = 'chwsunas') AND status_id = 1;
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwsunas' OR email = 'chwsunas');
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '423';
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '423' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '423';
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '423';
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ca3bce8ac638d32fd9cf2bfdb7cafff5010eacba',
			salt = '43f6ab1c',
			fname = 'Sunpet',
			lname = 'Assavapanumat',
			email = 's15_sunpet.a@vistec.ac.th',
			username = 'chwsunas',
			homepageId = '1',
			last_modified = '2019-12-05 09:44:48',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f64859ec64',
			language = 'en_us',
			lastlogin = '2019-12-05 09:44:48',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '423';
2019-12-05T09:44:48+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 09:44:48' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 09:44:48' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '423' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '423')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '423');
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '423';
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '423';
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '423' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '423';
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '423';
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '423';
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '423';
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '423' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '423';
2019-12-05T09:44:48+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '423';
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '423';
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '423';
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '423' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '423';
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '423';
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ca3bce8ac638d32fd9cf2bfdb7cafff5010eacba',
			salt = '43f6ab1c',
			fname = 'Sunpet',
			lname = 'Assavapanumat',
			email = 's15_sunpet.a@vistec.ac.th',
			username = 'chwsunas',
			homepageId = '1',
			last_modified = '2019-12-05 09:44:49',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f64859ec64',
			language = 'en_us',
			lastlogin = '2019-12-05 09:44:48',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '423';
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('423' = -1 OR ru.user_id = '423') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T09:44:49+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '423';
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '423';
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '423' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '423';
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '423';
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '423' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '423')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '423');
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T09:44:51+07:00 [2455] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '423';
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '423';
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '423' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '423';
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '423';
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '423' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '423')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '423');
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T09:44:56+07:00 [2449] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '423';
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '423';
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '423' AND (null is null OR r.role_level IN (null) );
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '423';
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '423';
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '423' AND r.resource_id = urp.resource_id;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '423' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '423')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '423');
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T09:44:58+07:00 [8833] DEBUG sql - [User=Sunpet Assavapanumat (s15_sunpet.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'kakvetso' OR email = 'kakvetso') AND status_id = 1;
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'kakvetso' OR email = 'kakvetso');
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '611e12e1ae07fee19e6a5e611cb87fb36e7b9abc',
			salt = '7b99b771',
			fname = 'Vetiga',
			lname = 'Somjit',
			email = '1730105@vistec.ac.th',
			username = 'kakvetso',
			homepageId = '1',
			last_modified = '2019-12-05 10:37:16',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b9ec9d04a6',
			language = 'th_th',
			lastlogin = '2019-12-05 10:37:16',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '489';
2019-12-05T10:37:16+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 10:37:16' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 10:37:16' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:16+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '611e12e1ae07fee19e6a5e611cb87fb36e7b9abc',
			salt = '7b99b771',
			fname = 'Vetiga',
			lname = 'Somjit',
			email = '1730105@vistec.ac.th',
			username = 'kakvetso',
			homepageId = '1',
			last_modified = '2019-12-05 10:37:17',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b9ec9d04a6',
			language = 'th_th',
			lastlogin = '2019-12-05 10:37:16',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '489';
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('489' = -1 OR ru.user_id = '489') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T10:37:17+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5dde0aa286bec293587117' AND
			rs.status_id <> 2;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6308'
		ORDER BY resource_level_id, r.name;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '6269';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6308';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6308';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6308';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6308';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '6269';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:20+07:00 [8833] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5dde0aa286bec293587117' AND
			rs.status_id <> 2;
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6308'
		ORDER BY resource_level_id, r.name;
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '6269';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6308';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6308';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6308';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6308';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '6269';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:21+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 10:37:26' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 10:37:26' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:26+07:00 [2455] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '611e12e1ae07fee19e6a5e611cb87fb36e7b9abc',
			salt = '7b99b771',
			fname = 'Vetiga',
			lname = 'Somjit',
			email = '1730105@vistec.ac.th',
			username = 'kakvetso',
			homepageId = '1',
			last_modified = '2019-12-05 10:37:27',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b9ec9d04a6',
			language = 'th_th',
			lastlogin = '2019-12-05 10:37:16',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '489';
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('489' = -1 OR ru.user_id = '489') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T10:37:27+07:00 [2449] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'sabpanpo' OR email = 'sabpanpo') AND status_id = 1;
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'sabpanpo' OR email = 'sabpanpo');
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-12-05 10:54:02',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-12-05 10:54:02',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-12-05T10:54:02+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:54:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'sabpanpo' OR email = 'sabpanpo') AND status_id = 1;
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM users WHERE (username = 'sabpanpo' OR email = 'sabpanpo');
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-12-05 10:54:03',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-12-05 10:54:03',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-12-05T10:54:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:54:03+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 10:54:07' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 10:54:07' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:07+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-12-05 10:54:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-12-05 10:54:03',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T10:54:07+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:54:11+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:54:23+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T10:54:24+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:54:24+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:54:42+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:55:08+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:55:09+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:55:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:55:10+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T10:55:10+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T10:55:11+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T10:55:11+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'sabpanpo' OR email = 'sabpanpo') AND status_id = 1;
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'sabpanpo' OR email = 'sabpanpo');
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-12-05 11:07:22',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-12-05 11:07:22',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-12-05T11:07:22+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 11:07:22' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 11:07:22' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:22+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-12-05 11:07:22',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-12-05 11:07:22',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T11:07:22+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T11:07:25+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T11:07:30+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5de7c91154f99324188229' AND
			rs.status_id <> 2;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6468'
		ORDER BY resource_level_id, r.name;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '6429';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6468';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6468';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6468';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6468';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '6429';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T11:07:45+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '423';
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maokamim' OR email = 'maokamim') AND status_id = 1;
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maokamim' OR email = 'maokamim');
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba9446d1ca625baaec1ff0cf752027ea5e3446d7',
			salt = '18410f10',
			fname = 'Kamonnart',
			lname = 'Imwiset',
			email = '1530307@vistec.ac.th',
			username = 'maokamim',
			homepageId = '1',
			last_modified = '2019-12-05 12:00:52',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f35c775604',
			language = 'en_us',
			lastlogin = '2019-12-05 12:00:52',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '479';
2019-12-05T12:00:52+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 12:00:52' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 12:00:52' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:00:52+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba9446d1ca625baaec1ff0cf752027ea5e3446d7',
			salt = '18410f10',
			fname = 'Kamonnart',
			lname = 'Imwiset',
			email = '1530307@vistec.ac.th',
			username = 'maokamim',
			homepageId = '1',
			last_modified = '2019-12-05 12:00:52',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f35c775604',
			language = 'en_us',
			lastlogin = '2019-12-05 12:00:52',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '479';
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('479' = -1 OR ru.user_id = '479') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T12:00:52+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:00:55+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:01:01+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:01:38+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 22:00:00' AND ri.start_date <= '2019-12-05 23:00:00') OR
					(ri.end_date >= '2019-12-05 22:00:00' AND ri.end_date <= '2019-12-05 23:00:00') OR
					(ri.start_date <= '2019-12-05 22:00:00' AND ri.end_date >= '2019-12-05 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-05 22:00:00' AND bi.start_date <= '2019-12-05 23:00:00')
				OR
				(bi.end_date >= '2019-12-05 22:00:00' AND bi.end_date <= '2019-12-05 23:00:00')
				OR
				(bi.start_date <= '2019-12-05 22:00:00' AND bi.end_date >= '2019-12-05 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 12:02:18', null, null, '0', false, 'none', '', '1', '1', '479', 'Powder mode');
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6473', '2', '1');
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '6', '6473');
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '6473');
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6473');
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '6473');
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-05 22:00:00', '2019-12-05 23:00:00', '5de88f5a24dce413193171', '6473', null);
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6434', '479', '1');
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:02:18+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:02:19+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:02:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 23:00:00' AND ri.start_date <= '2019-12-06 00:00:00') OR
					(ri.end_date >= '2019-12-05 23:00:00' AND ri.end_date <= '2019-12-06 00:00:00') OR
					(ri.start_date <= '2019-12-05 23:00:00' AND ri.end_date >= '2019-12-06 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-05 23:00:00' AND bi.start_date <= '2019-12-06 00:00:00')
				OR
				(bi.end_date >= '2019-12-05 23:00:00' AND bi.end_date <= '2019-12-06 00:00:00')
				OR
				(bi.start_date <= '2019-12-05 23:00:00' AND bi.end_date >= '2019-12-06 00:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:02:29+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 12:02:30', null, null, '0', false, 'none', '', '1', '1', '479', 'Powder mode');
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6474', '2', '1');
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '6', '6474');
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '6474');
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6474');
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '6474');
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-05 23:00:00', '2019-12-06 00:00:00', '5de88f65e55e3527006995', '6474', null);
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6435', '479', '1');
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:02:30+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:02:30+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:02:30+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:02:31+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'p_chumsaeng@hotmail.com' OR email = 'p_chumsaeng@hotmail.com') AND status_id = 1;
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'p_chumsaeng@hotmail.com' OR email = 'p_chumsaeng@hotmail.com');
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e90f8bbe4fad46ddf2b43ea0b9c353c4838223c3',
			salt = '7ca3c828',
			fname = 'Phongnarin',
			lname = 'Chumsaeng',
			email = 'p_chumsaeng@hotmail.com',
			username = 'khpphoch',
			homepageId = '1',
			last_modified = '2019-12-05 12:34:09',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d9c07e66e822',
			language = 'en_us',
			lastlogin = '2019-12-05 12:34:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '568';
2019-12-05T12:34:09+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'p_chumsaeng@hotmail.com' OR email = 'p_chumsaeng@hotmail.com') AND status_id = 1;
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM users WHERE (username = 'p_chumsaeng@hotmail.com' OR email = 'p_chumsaeng@hotmail.com');
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e90f8bbe4fad46ddf2b43ea0b9c353c4838223c3',
			salt = '7ca3c828',
			fname = 'Phongnarin',
			lname = 'Chumsaeng',
			email = 'p_chumsaeng@hotmail.com',
			username = 'khpphoch',
			homepageId = '1',
			last_modified = '2019-12-05 12:34:15',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d9c07e66e822',
			language = 'en_us',
			lastlogin = '2019-12-05 12:34:15',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '568';
2019-12-05T12:34:15+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 12:34:15' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 12:34:15' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '568' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568');
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:15+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:16+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:16+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:16+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:16+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:16+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:16+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e90f8bbe4fad46ddf2b43ea0b9c353c4838223c3',
			salt = '7ca3c828',
			fname = 'Phongnarin',
			lname = 'Chumsaeng',
			email = 'p_chumsaeng@hotmail.com',
			username = 'khpphoch',
			homepageId = '1',
			last_modified = '2019-12-05 12:34:16',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d9c07e66e822',
			language = 'en_us',
			lastlogin = '2019-12-05 12:34:15',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '568';
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('568' = -1 OR ru.user_id = '568') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T12:34:16+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '568' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568');
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:34:22+07:00 [2455] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '568' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568');
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:34:32+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:34:33+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:48+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '11';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '11';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '11';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 13:00:00' AND ri.start_date <= '2019-12-05 23:00:00') OR
					(ri.end_date >= '2019-12-05 13:00:00' AND ri.end_date <= '2019-12-05 23:00:00') OR
					(ri.start_date <= '2019-12-05 13:00:00' AND ri.end_date >= '2019-12-05 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('11'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-05 13:00:00' AND bi.start_date <= '2019-12-05 23:00:00')
				OR
				(bi.end_date >= '2019-12-05 13:00:00' AND bi.end_date <= '2019-12-05 23:00:00')
				OR
				(bi.start_date <= '2019-12-05 13:00:00' AND bi.end_date >= '2019-12-05 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '568' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568');
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 12:34:59' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 12:34:59' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 12:34:59' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('568' = -1 OR ru.user_id = '568') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 12:34:59', null, null, '0', false, 'none', '', '1', '1', '568', null);
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6475', '11', '1');
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-05 13:00:00', '2019-12-05 23:00:00', '5de897030369f816916707', '6475', null);
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6436', '568', '1');
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:34:59+07:00 [2449] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '568';
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '568';
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '568' AND (null is null OR r.role_level IN (null) );
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '568';
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '568';
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '568' AND r.resource_id = urp.resource_id;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '568' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '568');
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T12:35:00+07:00 [8833] DEBUG sql - [User=Phongnarin Chumsaeng (p_chumsaeng@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwkacsa' OR email = 'chwkacsa') AND status_id = 1;
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwkacsa' OR email = 'chwkacsa');
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f8acb7c4455b9f44b95443bcf770ac2c56442524',
			salt = '7ad45c18',
			fname = 'Kachaporn',
			lname = 'Saenluang',
			email = 'kachaporn.s_s16@vistec.ac.th',
			username = 'chwkacsa',
			homepageId = '1',
			last_modified = '2019-12-05 13:38:40',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89180bcbd94',
			language = 'en_us',
			lastlogin = '2019-12-05 13:38:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '424';
2019-12-05T13:38:40+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-12-05T13:38:40+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:38:41+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:38:41+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T13:38:41+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T13:38:41+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-12-05T13:38:45+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:38:46+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:38:46+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T13:38:46+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T13:38:46+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T13:39:21+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:39:21+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:39:21+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:39:21+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:39:21+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T13:39:22+07:00 [2455] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T13:39:28+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-12-05T13:40:18+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-06 14:00:00' AND ri.start_date <= '2019-12-06 16:00:00') OR
					(ri.end_date >= '2019-12-06 14:00:00' AND ri.end_date <= '2019-12-06 16:00:00') OR
					(ri.start_date <= '2019-12-06 14:00:00' AND ri.end_date >= '2019-12-06 16:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-06 14:00:00' AND bi.start_date <= '2019-12-06 16:00:00')
				OR
				(bi.end_date >= '2019-12-06 14:00:00' AND bi.end_date <= '2019-12-06 16:00:00')
				OR
				(bi.start_date <= '2019-12-06 14:00:00' AND bi.end_date >= '2019-12-06 16:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 13:40:21' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 13:40:21' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 13:40:21' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('424' = -1 OR ru.user_id = '424') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 13:40:21', null, null, '0', false, 'none', '', '1', '1', '424', null);
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6476', '19', '1');
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-06 14:00:00', '2019-12-06 16:00:00', '5de8a6555a734123114525', '6476', null);
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6437', '424', '1');
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-12-05T13:40:21+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T13:40:22+07:00 [8833] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T13:40:33+07:00 [2449] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1830301@vistec.ac.th' OR email = '1830301@vistec.ac.th') AND status_id = 1;
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1830301@vistec.ac.th' OR email = '1830301@vistec.ac.th');
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e4c322e60c271fe86d0acf74bc7849fd418d7690',
			salt = '73149551',
			fname = 'Jitpisut',
			lname = 'Poolwong',
			email = '1830301@vistec.ac.th',
			username = 'vdejitpo',
			homepageId = '1',
			last_modified = '2019-12-05 13:49:34',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f136fabfbb',
			language = 'en_us',
			lastlogin = '2019-12-05 13:49:34',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '389';
2019-12-05T13:49:34+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 13:49:34' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 13:49:34' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:49:34+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:35+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e4c322e60c271fe86d0acf74bc7849fd418d7690',
			salt = '73149551',
			fname = 'Jitpisut',
			lname = 'Poolwong',
			email = '1830301@vistec.ac.th',
			username = 'vdejitpo',
			homepageId = '1',
			last_modified = '2019-12-05 13:49:35',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f136fabfbb',
			language = 'en_us',
			lastlogin = '2019-12-05 13:49:34',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '389';
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('389' = -1 OR ru.user_id = '389') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T13:49:35+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T13:49:39+07:00 [2455] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T13:49:50+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:49:56+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '12';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '12';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '12';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 14:00:00' AND ri.start_date <= '2019-12-05 16:00:00') OR
					(ri.end_date >= '2019-12-05 14:00:00' AND ri.end_date <= '2019-12-05 16:00:00') OR
					(ri.start_date <= '2019-12-05 14:00:00' AND ri.end_date >= '2019-12-05 16:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('12'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-05 14:00:00' AND bi.start_date <= '2019-12-05 16:00:00')
				OR
				(bi.end_date >= '2019-12-05 14:00:00' AND bi.end_date <= '2019-12-05 16:00:00')
				OR
				(bi.start_date <= '2019-12-05 14:00:00' AND bi.end_date >= '2019-12-05 16:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 13:50:02' AND ri.start_date <= '2019-12-06 00:00:00') OR
					(ri.end_date >= '2019-12-05 13:50:02' AND ri.end_date <= '2019-12-06 00:00:00') OR
					(ri.start_date <= '2019-12-05 13:50:02' AND ri.end_date >= '2019-12-06 00:00:00')) AND
					('389' = -1 OR ru.user_id = '389') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 13:50:02', null, null, '0', false, 'none', '', '1', '1', '389', null);
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6477', '12', '1');
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-05 14:00:00', '2019-12-05 16:00:00', '5de8a89a1e35d918934821', '6477', null);
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6438', '389', '1');
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:50:02+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T13:50:04+07:00 [8833] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosprach' OR email = 'mosprach') AND status_id = 1;
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosprach' OR email = 'mosprach');
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ac6d6719a9894b7648d8ce53c34ac2acf1db90f2',
			salt = '7739b36a',
			fname = 'Praeploy',
			lname = 'Chomkhuntod',
			email = 'praeploy.c18@hotmail.com',
			username = 'mosprach',
			homepageId = '1',
			last_modified = '2019-12-05 14:38:50',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d314513801a2',
			language = 'en_us',
			lastlogin = '2019-12-05 14:38:50',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '526';
2019-12-05T14:38:50+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 14:38:50' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 14:38:50' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:38:50+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ac6d6719a9894b7648d8ce53c34ac2acf1db90f2',
			salt = '7739b36a',
			fname = 'Praeploy',
			lname = 'Chomkhuntod',
			email = 'praeploy.c18@hotmail.com',
			username = 'mosprach',
			homepageId = '1',
			last_modified = '2019-12-05 14:38:51',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d314513801a2',
			language = 'en_us',
			lastlogin = '2019-12-05 14:38:50',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '526';
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('526' = -1 OR ru.user_id = '526') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T14:38:51+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T14:39:00+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T14:39:01+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T14:39:01+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T14:39:09+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 14:39:13' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 14:39:13' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:39:13+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ac6d6719a9894b7648d8ce53c34ac2acf1db90f2',
			salt = '7739b36a',
			fname = 'Praeploy',
			lname = 'Chomkhuntod',
			email = 'praeploy.c18@hotmail.com',
			username = 'mosprach',
			homepageId = '1',
			last_modified = '2019-12-05 14:39:13',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d314513801a2',
			language = 'en_us',
			lastlogin = '2019-12-05 14:38:50',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '526';
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('526' = -1 OR ru.user_id = '526') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T14:39:13+07:00 [2449] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T14:39:18+07:00 [8833] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T14:39:31+07:00 [2455] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'silvano.delgobbo' OR email = 'silvano.delgobbo') AND status_id = 1;
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'silvano.delgobbo' OR email = 'silvano.delgobbo');
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea247d3982cb38209c6f8c31771094c5c7c9c3f3',
			salt = '2c696e51',
			fname = 'Silvano',
			lname = 'DelGobbo',
			email = 'silvanodel.g@vistec.ac.th',
			username = 'silvano.delgobbo',
			homepageId = '1',
			last_modified = '2019-12-05 15:09:51',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9093d470545',
			language = 'en_us',
			lastlogin = '2019-12-05 15:09:51',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '393';
2019-12-05T15:09:51+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 15:09:52' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 15:09:52' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:09:52+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea247d3982cb38209c6f8c31771094c5c7c9c3f3',
			salt = '2c696e51',
			fname = 'Silvano',
			lname = 'DelGobbo',
			email = 'silvanodel.g@vistec.ac.th',
			username = 'silvano.delgobbo',
			homepageId = '1',
			last_modified = '2019-12-05 15:09:53',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9093d470545',
			language = 'en_us',
			lastlogin = '2019-12-05 15:09:51',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '393';
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('393' = -1 OR ru.user_id = '393') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T15:09:53+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:10:00+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:10:43+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:11:03+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1530308@vistec.ac.th' OR email = '1530308@vistec.ac.th') AND status_id = 1;
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1530308@vistec.ac.th' OR email = '1530308@vistec.ac.th');
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '433';
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '433' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '433';
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '433';
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6844ee0759d29358e726abfe16628dd592bcbef5',
			salt = '74b3fafa',
			fname = 'Kwanchanok',
			lname = 'Udomsasporn',
			email = '1530308@vistec.ac.th',
			username = 'khpkwaud',
			homepageId = '1',
			last_modified = '2019-12-05 15:11:27',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8923864b934',
			language = 'en_us',
			lastlogin = '2019-12-05 15:11:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '433';
2019-12-05T15:11:27+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '433' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433');
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:11:27+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-06 15:00:00' AND ri.start_date <= '2019-12-06 18:00:00') OR
					(ri.end_date >= '2019-12-06 15:00:00' AND ri.end_date <= '2019-12-06 18:00:00') OR
					(ri.start_date <= '2019-12-06 15:00:00' AND ri.end_date >= '2019-12-06 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-06 15:00:00' AND bi.start_date <= '2019-12-06 18:00:00')
				OR
				(bi.end_date >= '2019-12-06 15:00:00' AND bi.end_date <= '2019-12-06 18:00:00')
				OR
				(bi.start_date <= '2019-12-06 15:00:00' AND bi.end_date >= '2019-12-06 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 15:11:32', null, null, '0', false, 'none', '', '1', '1', '393', 'Powder mode');
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6478', '2', '1');
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '2', '6478');
2019-12-05T15:11:32+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'Powder specimen holder (small diameter)', '6478');
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6478');
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '6478');
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-06 15:00:00', '2019-12-06 18:00:00', '5de8bbb4d8e96118546430', '6478', null);
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6439', '393', '1');
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:11:33+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:11:34+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:11:35+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:11:35+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:11:35+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:11:35+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '433';
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '433' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '433';
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '433';
2019-12-05T15:12:03+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '433' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433');
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:12:06+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '433';
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '433' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '433';
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '433';
2019-12-05T15:12:13+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:15+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '28';
2019-12-05T15:12:15+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '28';
2019-12-05T15:12:15+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '28';
2019-12-05T15:12:15+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 21:00:00' AND ri.start_date <= '2019-12-06 00:00:00') OR
					(ri.end_date >= '2019-12-05 21:00:00' AND ri.end_date <= '2019-12-06 00:00:00') OR
					(ri.start_date <= '2019-12-05 21:00:00' AND ri.end_date >= '2019-12-06 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-05 21:00:00' AND bi.start_date <= '2019-12-06 00:00:00')
				OR
				(bi.end_date >= '2019-12-05 21:00:00' AND bi.end_date <= '2019-12-06 00:00:00')
				OR
				(bi.start_date <= '2019-12-05 21:00:00' AND bi.end_date >= '2019-12-06 00:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '433' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433');
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '433';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '433' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '433';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '433';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '22';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 15:12:16' AND ri.start_date <= '2019-12-07 00:00:00') OR
					(ri.end_date >= '2019-12-05 15:12:16' AND ri.end_date <= '2019-12-07 00:00:00') OR
					(ri.start_date <= '2019-12-05 15:12:16' AND ri.end_date >= '2019-12-07 00:00:00')) AND
					('433' = -1 OR ru.user_id = '433') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 15:12:16', null, null, '0', false, 'none', '', '1', '1', '433', null);
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6479', '28', '1');
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-05 21:00:00', '2019-12-06 00:00:00', '5de8bbdff1788965922178', '6479', null);
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6440', '433', '1');
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '433';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '433' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '433';
2019-12-05T15:12:16+07:00 [2455] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '433';
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '433' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433');
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:12:17+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '433';
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '433' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '433';
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '433';
2019-12-05T15:12:26+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '28';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '28';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '28';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-06 00:00:00' AND ri.start_date <= '2019-12-06 06:00:00') OR
					(ri.end_date >= '2019-12-06 00:00:00' AND ri.end_date <= '2019-12-06 06:00:00') OR
					(ri.start_date <= '2019-12-06 00:00:00' AND ri.end_date >= '2019-12-06 06:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-06 00:00:00' AND bi.start_date <= '2019-12-06 06:00:00')
				OR
				(bi.end_date >= '2019-12-06 00:00:00' AND bi.end_date <= '2019-12-06 06:00:00')
				OR
				(bi.start_date <= '2019-12-06 00:00:00' AND bi.end_date >= '2019-12-06 06:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '433' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433');
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '433';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '433' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '433';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '433';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '22';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 15:12:29' AND ri.start_date <= '2019-12-07 00:00:00') OR
					(ri.end_date >= '2019-12-05 15:12:29' AND ri.end_date <= '2019-12-07 00:00:00') OR
					(ri.start_date <= '2019-12-05 15:12:29' AND ri.end_date >= '2019-12-07 00:00:00')) AND
					('433' = -1 OR ru.user_id = '433') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 15:12:29', null, null, '0', false, 'none', '', '1', '1', '433', null);
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6480', '28', '1');
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-06 00:00:00', '2019-12-06 06:00:00', '5de8bbed225f0656078183', '6480', null);
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6441', '433', '1');
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '433';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '433';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '433' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '433';
2019-12-05T15:12:29+07:00 [2449] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '433';
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '433' AND r.resource_id = urp.resource_id;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '433' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '433');
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T15:12:34+07:00 [8833] DEBUG sql - [User=Kwanchanok Udomsasporn (1530308@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:23:17+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:23:18+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:23:18+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T15:23:26+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:23:39+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-06 16:00:00' AND ri.start_date <= '2019-12-06 21:00:00') OR
					(ri.end_date >= '2019-12-06 16:00:00' AND ri.end_date <= '2019-12-06 21:00:00') OR
					(ri.start_date <= '2019-12-06 16:00:00' AND ri.end_date >= '2019-12-06 21:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-06 16:00:00' AND bi.start_date <= '2019-12-06 21:00:00')
				OR
				(bi.end_date >= '2019-12-06 16:00:00' AND bi.end_date <= '2019-12-06 21:00:00')
				OR
				(bi.start_date <= '2019-12-06 16:00:00' AND bi.end_date >= '2019-12-06 21:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 15:23:45' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 15:23:45' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 15:23:45' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('393' = -1 OR ru.user_id = '393') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 15:23:45', null, null, '0', false, 'none', '', '1', '1', '393', null);
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6481', '19', '1');
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-06 16:00:00', '2019-12-06 21:00:00', '5de8be918c370660285881', '6481', null);
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6442', '393', '1');
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:23:45+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T15:23:47+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:54+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea247d3982cb38209c6f8c31771094c5c7c9c3f3',
			salt = '2c696e51',
			fname = 'Silvano',
			lname = 'DelGobbo',
			email = 'silvanodel.g@vistec.ac.th',
			username = 'silvano.delgobbo',
			homepageId = '1',
			last_modified = '2019-12-05 15:23:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9093d470545',
			language = 'en_us',
			lastlogin = '2019-12-05 15:09:51',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '393';
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('393' = -1 OR ru.user_id = '393') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T15:23:55+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:24:13+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:24:23+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5de8bbb4d8e96118546430' AND
			rs.status_id <> 2;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6478'
		ORDER BY resource_level_id, r.name;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '6439';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6478';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6478';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6478';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6478';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '6439';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:24:28+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T15:24:37+07:00 [8833] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'sabpanpo' OR email = 'sabpanpo') AND status_id = 1;
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'sabpanpo' OR email = 'sabpanpo');
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-12-05 16:26:05',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-12-05 16:26:05',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-12-05T16:26:05+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 16:26:05' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 16:26:05' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:05+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-12-05 16:26:05',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-12-05 16:26:05',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:26:05+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:26:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:26:17+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:27:40+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:28:02+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '13';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '13';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '13';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 10:00:00' AND ri.start_date <= '2019-12-09 16:00:00') OR
					(ri.end_date >= '2019-12-09 10:00:00' AND ri.end_date <= '2019-12-09 16:00:00') OR
					(ri.start_date <= '2019-12-09 10:00:00' AND ri.end_date >= '2019-12-09 16:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('13'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 10:00:00' AND bi.start_date <= '2019-12-09 16:00:00')
				OR
				(bi.end_date >= '2019-12-09 10:00:00' AND bi.end_date <= '2019-12-09 16:00:00')
				OR
				(bi.start_date <= '2019-12-09 10:00:00' AND bi.end_date >= '2019-12-09 16:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:28:11' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:28:11' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:28:11' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 16:28:11', null, null, '0', false, 'none', '', '1', '1', '395', null);
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6482', '13', '1');
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-09 10:00:00', '2019-12-09 16:00:00', '5de8cdabbc1c6463329195', '6482', null);
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6443', '395', '1');
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:28:11+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:28:18+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5de8cdabbc1c6463329195' AND
			rs.status_id <> 2;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6482'
		ORDER BY resource_level_id, r.name;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '6443';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6482';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6482';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6482';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6482';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '6443';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:30:21+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances r
		INNER JOIN reservation_series rs ON r.series_id = rs.series_id
		WHERE
			reference_number = '5de8cdabbc1c6463329195' AND
			status_id <> 2;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances
		WHERE series_id = '6482';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6482'
		ORDER BY resource_level_id, r.name;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT ru.*, ri.*
		FROM reservation_users ru
		INNER JOIN reservation_instances ri ON ru.reservation_instance_id = ri.reservation_instance_id
		WHERE series_id = '6482';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6482';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6482';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6482';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6482';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT rg.*, ri.*
			FROM reservation_guests rg
			INNER JOIN reservation_instances ri ON rg.reservation_instance_id = ri.reservation_instance_id
			WHERE series_id = '6482';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '13';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '13';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '13';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 14:00:00' AND ri.start_date <= '2019-12-09 20:00:00') OR
					(ri.end_date >= '2019-12-09 14:00:00' AND ri.end_date <= '2019-12-09 20:00:00') OR
					(ri.start_date <= '2019-12-09 14:00:00' AND ri.end_date >= '2019-12-09 20:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('13'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 14:00:00' AND bi.start_date <= '2019-12-09 20:00:00')
				OR
				(bi.end_date >= '2019-12-09 14:00:00' AND bi.end_date <= '2019-12-09 20:00:00')
				OR
				(bi.start_date <= '2019-12-09 14:00:00' AND bi.end_date >= '2019-12-09 20:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:31:09' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:31:09' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:31:09' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE
			reservation_series
		SET
			last_modified = '2019-12-05 16:31:09',
			title = null,
			description = null,
			repeat_type = 'none',
			repeat_options = '',
			status_id = '1',
			owner_id = '395',
			allow_participation = '0'
		WHERE
			series_id = '6482';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE reservation_instances
		SET
			series_id = '6482',
			start_date = '2019-12-09 14:00:00',
			end_date = '2019-12-09 20:00:00',
			checkin_date = null,
			checkout_date = null,
			previous_end_date = '2019-12-09 16:00:00',
			credit_count = null
		WHERE
			reference_number = '5de8cdabbc1c6463329195';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:09+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:31:13+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5de8cdabbc1c6463329195' AND
			rs.status_id <> 2;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6482'
		ORDER BY resource_level_id, r.name;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '6443';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6482';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6482';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6482';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6482';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '6443';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:18+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances r
		INNER JOIN reservation_series rs ON r.series_id = rs.series_id
		WHERE
			reference_number = '5de8cdabbc1c6463329195' AND
			status_id <> 2;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances
		WHERE series_id = '6482';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6482'
		ORDER BY resource_level_id, r.name;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT ru.*, ri.*
		FROM reservation_users ru
		INNER JOIN reservation_instances ri ON ru.reservation_instance_id = ri.reservation_instance_id
		WHERE series_id = '6482';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6482';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6482';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6482';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6482';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT rg.*, ri.*
			FROM reservation_guests rg
			INNER JOIN reservation_instances ri ON rg.reservation_instance_id = ri.reservation_instance_id
			WHERE series_id = '6482';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '13';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '13';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '13';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 15:00:00' AND ri.start_date <= '2019-12-09 21:00:00') OR
					(ri.end_date >= '2019-12-09 15:00:00' AND ri.end_date <= '2019-12-09 21:00:00') OR
					(ri.start_date <= '2019-12-09 15:00:00' AND ri.end_date >= '2019-12-09 21:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('13'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 15:00:00' AND bi.start_date <= '2019-12-09 21:00:00')
				OR
				(bi.end_date >= '2019-12-09 15:00:00' AND bi.end_date <= '2019-12-09 21:00:00')
				OR
				(bi.start_date <= '2019-12-09 15:00:00' AND bi.end_date >= '2019-12-09 21:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T16:31:23+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:31:23' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:31:23' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:31:23' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE
			reservation_series
		SET
			last_modified = '2019-12-05 16:31:24',
			title = null,
			description = null,
			repeat_type = 'none',
			repeat_options = '',
			status_id = '1',
			owner_id = '395',
			allow_participation = '0'
		WHERE
			series_id = '6482';
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE reservation_instances
		SET
			series_id = '6482',
			start_date = '2019-12-09 15:00:00',
			end_date = '2019-12-09 21:00:00',
			checkin_date = null,
			checkout_date = null,
			previous_end_date = '2019-12-09 20:00:00',
			credit_count = null
		WHERE
			reference_number = '5de8cdabbc1c6463329195';
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:24+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:31:27+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '13';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '13';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '13';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-10 09:00:00' AND ri.start_date <= '2019-12-10 14:00:00') OR
					(ri.end_date >= '2019-12-10 09:00:00' AND ri.end_date <= '2019-12-10 14:00:00') OR
					(ri.start_date <= '2019-12-10 09:00:00' AND ri.end_date >= '2019-12-10 14:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('13'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-10 09:00:00' AND bi.start_date <= '2019-12-10 14:00:00')
				OR
				(bi.end_date >= '2019-12-10 09:00:00' AND bi.end_date <= '2019-12-10 14:00:00')
				OR
				(bi.start_date <= '2019-12-10 09:00:00' AND bi.end_date >= '2019-12-10 14:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:31:52' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:31:52' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:31:52' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 16:31:52', null, null, '0', false, 'none', '', '1', '1', '395', null);
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6483', '13', '1');
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-10 09:00:00', '2019-12-10 14:00:00', '5de8ce88a45b2161446908', '6483', null);
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6444', '395', '1');
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:52+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:31:56+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:32:03+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dackriau' OR email = 'dackriau') AND status_id = 1;
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dackriau' OR email = 'dackriau');
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '65d04aac1e8db3b50cfaf8ccb966f859e11cd4be',
			salt = '5549451e',
			fname = 'Krisada',
			lname = 'Auepattana-aumrung',
			email = '1830302@vistec.ac.th',
			username = 'dackriau',
			homepageId = '1',
			last_modified = '2019-12-05 16:37:23',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cd80f43d8083',
			language = 'en_us',
			lastlogin = '2019-12-05 16:37:23',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '405';
2019-12-05T16:37:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 16:37:23' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 16:37:23' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '405' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405');
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:37:23+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '65d04aac1e8db3b50cfaf8ccb966f859e11cd4be',
			salt = '5549451e',
			fname = 'Krisada',
			lname = 'Auepattana-aumrung',
			email = '1830302@vistec.ac.th',
			username = 'dackriau',
			homepageId = '1',
			last_modified = '2019-12-05 16:37:24',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cd80f43d8083',
			language = 'en_us',
			lastlogin = '2019-12-05 16:37:23',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '405';
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('405' = -1 OR ru.user_id = '405') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:37:24+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '405' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405');
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:37:26+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '405' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405');
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-12-05T16:37:38+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:38:12+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:38:13+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:38:17+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '13';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '13';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '13';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 22:00:00' AND ri.start_date <= '2019-12-09 23:00:00') OR
					(ri.end_date >= '2019-12-09 22:00:00' AND ri.end_date <= '2019-12-09 23:00:00') OR
					(ri.start_date <= '2019-12-09 22:00:00' AND ri.end_date >= '2019-12-09 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('13'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 22:00:00' AND bi.start_date <= '2019-12-09 23:00:00')
				OR
				(bi.end_date >= '2019-12-09 22:00:00' AND bi.end_date <= '2019-12-09 23:00:00')
				OR
				(bi.start_date <= '2019-12-09 22:00:00' AND bi.end_date >= '2019-12-09 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:38:19' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:38:19' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:38:19' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 16:38:19', null, null, '0', false, 'none', '', '1', '1', '395', null);
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6484', '13', '1');
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-09 22:00:00', '2019-12-09 23:00:00', '5de8d00b516a7991888177', '6484', null);
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6445', '395', '1');
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:38:19+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:38:23+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '27';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '27';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '27';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-06 09:00:00' AND ri.start_date <= '2019-12-06 10:00:00') OR
					(ri.end_date >= '2019-12-06 09:00:00' AND ri.end_date <= '2019-12-06 10:00:00') OR
					(ri.start_date <= '2019-12-06 09:00:00' AND ri.end_date >= '2019-12-06 10:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-06 09:00:00' AND bi.start_date <= '2019-12-06 10:00:00')
				OR
				(bi.end_date >= '2019-12-06 09:00:00' AND bi.end_date <= '2019-12-06 10:00:00')
				OR
				(bi.start_date <= '2019-12-06 09:00:00' AND bi.end_date >= '2019-12-06 10:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '405' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405');
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '12';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:38:47' AND ri.start_date <= '2019-12-07 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:38:47' AND ri.end_date <= '2019-12-07 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:38:47' AND ri.end_date >= '2019-12-07 00:00:00')) AND
					('405' = -1 OR ru.user_id = '405') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-12-05T16:38:47+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 16:38:47', null, null, '0', false, 'none', '', '1', '1', '405', null);
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6485', '27', '1');
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('39', '1', '10', '6485');
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-06 09:00:00', '2019-12-06 10:00:00', '5de8d027e1869527072275', '6485', null);
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6446', '405', '1');
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:38:48+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '405' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405');
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-12-05T16:38:49+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '405';
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '405';
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '405' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '405';
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '405';
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '405' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405');
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:38:53+07:00 [2455] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '405' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405');
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T16:39:43+07:00 [2449] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '405' AND r.resource_id = urp.resource_id;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '405' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '405');
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T16:39:54+07:00 [8833] DEBUG sql - [User=Krisada Auepattana-aumrung (1830302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T16:42:48+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5de8cdabbc1c6463329195' AND
			rs.status_id <> 2;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6482'
		ORDER BY resource_level_id, r.name;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '6443';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6482';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6482';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6482';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6482';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '6443';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:42:49+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances r
		INNER JOIN reservation_series rs ON r.series_id = rs.series_id
		WHERE
			reference_number = '5de8cdabbc1c6463329195' AND
			status_id <> 2;
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances
		WHERE series_id = '6482';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6482'
		ORDER BY resource_level_id, r.name;
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT ru.*, ri.*
		FROM reservation_users ru
		INNER JOIN reservation_instances ri ON ru.reservation_instance_id = ri.reservation_instance_id
		WHERE series_id = '6482';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6482';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6482';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6482';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6482';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT rg.*, ri.*
			FROM reservation_guests rg
			INNER JOIN reservation_instances ri ON rg.reservation_instance_id = ri.reservation_instance_id
			WHERE series_id = '6482';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '13';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '13';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '13';
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 15:00:00' AND ri.start_date <= '2019-12-09 17:00:00') OR
					(ri.end_date >= '2019-12-09 15:00:00' AND ri.end_date <= '2019-12-09 17:00:00') OR
					(ri.start_date <= '2019-12-09 15:00:00' AND ri.end_date >= '2019-12-09 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('13'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 15:00:00' AND bi.start_date <= '2019-12-09 17:00:00')
				OR
				(bi.end_date >= '2019-12-09 15:00:00' AND bi.end_date <= '2019-12-09 17:00:00')
				OR
				(bi.start_date <= '2019-12-09 15:00:00' AND bi.end_date >= '2019-12-09 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:42:58+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:42:59' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:42:59' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:42:59' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE
			reservation_series
		SET
			last_modified = '2019-12-05 16:42:59',
			title = null,
			description = null,
			repeat_type = 'none',
			repeat_options = '',
			status_id = '1',
			owner_id = '395',
			allow_participation = '0'
		WHERE
			series_id = '6482';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE reservation_instances
		SET
			series_id = '6482',
			start_date = '2019-12-09 15:00:00',
			end_date = '2019-12-09 17:00:00',
			checkin_date = null,
			checkout_date = null,
			previous_end_date = '2019-12-09 21:00:00',
			credit_count = null
		WHERE
			reference_number = '5de8cdabbc1c6463329195';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:42:59+07:00 [2455] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:43:02+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:43:16+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '13';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '13';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '13';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 17:00:00' AND ri.start_date <= '2019-12-09 21:00:00') OR
					(ri.end_date >= '2019-12-09 17:00:00' AND ri.end_date <= '2019-12-09 21:00:00') OR
					(ri.start_date <= '2019-12-09 17:00:00' AND ri.end_date >= '2019-12-09 21:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('13'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 17:00:00' AND bi.start_date <= '2019-12-09 21:00:00')
				OR
				(bi.end_date >= '2019-12-09 17:00:00' AND bi.end_date <= '2019-12-09 21:00:00')
				OR
				(bi.start_date <= '2019-12-09 17:00:00' AND bi.end_date >= '2019-12-09 21:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:43:18' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:43:18' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:43:18' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 16:43:18', null, null, '0', false, 'none', '', '1', '1', '395', null);
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6486', '13', '1');
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-09 17:00:00', '2019-12-09 21:00:00', '5de8d13621725955658901', '6486', null);
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6447', '395', '1');
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:43:18+07:00 [2449] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:43:21+07:00 [8833] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dackanma' OR email = 'dackanma') AND status_id = 1;
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dackanma' OR email = 'dackanma');
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6127e2a5fd74f256b12fa3467968aac41fe4037a',
			salt = '23220828',
			fname = 'Kanyarat',
			lname = 'Mantala',
			email = 'kanyarat.mant@gmail.com',
			username = 'dackanma',
			homepageId = '1',
			last_modified = '2019-12-05 16:58:17',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d6627ff4f61d',
			language = 'en_us',
			lastlogin = '2019-12-05 16:58:17',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '565';
2019-12-05T16:58:17+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 16:58:18' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 16:58:18' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '565' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565');
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:18+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6127e2a5fd74f256b12fa3467968aac41fe4037a',
			salt = '23220828',
			fname = 'Kanyarat',
			lname = 'Mantala',
			email = 'kanyarat.mant@gmail.com',
			username = 'dackanma',
			homepageId = '1',
			last_modified = '2019-12-05 16:58:19',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d6627ff4f61d',
			language = 'en_us',
			lastlogin = '2019-12-05 16:58:17',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '565';
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('565' = -1 OR ru.user_id = '565') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:58:19+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '565' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565');
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:58:22+07:00 [2449] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '565' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565');
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:58:26+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:36+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '18';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '18';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '18';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-06 09:00:00' AND ri.start_date <= '2019-12-06 15:00:00') OR
					(ri.end_date >= '2019-12-06 09:00:00' AND ri.end_date <= '2019-12-06 15:00:00') OR
					(ri.start_date <= '2019-12-06 09:00:00' AND ri.end_date >= '2019-12-06 15:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('18'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-06 09:00:00' AND bi.start_date <= '2019-12-06 15:00:00')
				OR
				(bi.end_date >= '2019-12-06 09:00:00' AND bi.end_date <= '2019-12-06 15:00:00')
				OR
				(bi.start_date <= '2019-12-06 09:00:00' AND bi.end_date >= '2019-12-06 15:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '565' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565');
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 16:58:53' AND ri.start_date <= '2020-01-01 00:00:00') OR
					(ri.end_date >= '2019-12-05 16:58:53' AND ri.end_date <= '2020-01-01 00:00:00') OR
					(ri.start_date <= '2019-12-05 16:58:53' AND ri.end_date >= '2020-01-01 00:00:00')) AND
					('565' = -1 OR ru.user_id = '565') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 16:58:53', null, null, '0', false, 'none', '', '1', '1', '565', null);
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6487', '18', '1');
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('39', '1', '4', '6487');
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('40', '1', '', '6487');
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6487');
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-06 09:00:00', '2019-12-06 15:00:00', '5de8d4dd18198736955375', '6487', null);
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6448', '565', '1');
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:53+07:00 [8833] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '565';
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '565';
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '565' AND (null is null OR r.role_level IN (null) );
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '565';
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '565';
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '565' AND r.resource_id = urp.resource_id;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '565' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '565');
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T16:58:54+07:00 [2455] DEBUG sql - [User=Kanyarat Mantala (kanyarat.mant@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'silvano.delgobbo' OR email = 'silvano.delgobbo') AND status_id = 1;
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'silvano.delgobbo' OR email = 'silvano.delgobbo');
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea247d3982cb38209c6f8c31771094c5c7c9c3f3',
			salt = '2c696e51',
			fname = 'Silvano',
			lname = 'DelGobbo',
			email = 'silvanodel.g@vistec.ac.th',
			username = 'silvano.delgobbo',
			homepageId = '1',
			last_modified = '2019-12-05 17:24:14',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9093d470545',
			language = 'en_us',
			lastlogin = '2019-12-05 17:24:14',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '393';
2019-12-05T17:24:14+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T17:24:14+07:00 [2449] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T17:35:09+07:00 [2455] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dacsupbo' OR email = 'dacsupbo') AND status_id = 1;
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dacsupbo' OR email = 'dacsupbo');
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '407';
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '407' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '407';
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '407';
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e05836140043f3f7bf2b426708285c728d91bf55',
			salt = '07dc06a1',
			fname = 'Supissra',
			lname = 'Boon-in',
			email = '1830306@vistec.ac.th',
			username = 'dacsupbo',
			homepageId = '1',
			last_modified = '2019-12-05 18:22:04',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cb7f3ca874f0',
			language = 'en_us',
			lastlogin = '2019-12-05 18:22:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '407';
2019-12-05T18:22:04+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 18:22:05' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 18:22:05' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '407' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '407')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '407');
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '407';
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '407';
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '407' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '407';
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '407';
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '407';
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '407';
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '407' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '407';
2019-12-05T18:22:05+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '407';
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '407';
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '407';
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '407' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '407';
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '407';
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e05836140043f3f7bf2b426708285c728d91bf55',
			salt = '07dc06a1',
			fname = 'Supissra',
			lname = 'Boon-in',
			email = '1830306@vistec.ac.th',
			username = 'dacsupbo',
			homepageId = '1',
			last_modified = '2019-12-05 18:22:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cb7f3ca874f0',
			language = 'en_us',
			lastlogin = '2019-12-05 18:22:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '407';
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('407' = -1 OR ru.user_id = '407') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T18:22:06+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '407';
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '407';
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '407' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '407';
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '407';
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '407' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '407')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '407');
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:22:19+07:00 [2455] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '407' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '407')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '407');
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T18:22:35+07:00 [2449] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T18:22:48+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '407' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '407')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '407');
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-12-05T18:22:49+07:00 [8833] DEBUG sql - [User=Supissra Boon-in (1830306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maokamim' OR email = 'maokamim') AND status_id = 1;
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maokamim' OR email = 'maokamim');
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba9446d1ca625baaec1ff0cf752027ea5e3446d7',
			salt = '18410f10',
			fname = 'Kamonnart',
			lname = 'Imwiset',
			email = '1530307@vistec.ac.th',
			username = 'maokamim',
			homepageId = '1',
			last_modified = '2019-12-05 18:48:38',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f35c775604',
			language = 'en_us',
			lastlogin = '2019-12-05 18:48:38',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '479';
2019-12-05T18:48:38+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T18:48:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:48:42+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:50:41+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'pipsimta' OR email = 'pipsimta') AND status_id = 1;
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'pipsimta' OR email = 'pipsimta');
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '854e842dbd9061fa85222a7d2ddb4c09e73e2ec7',
			salt = '2eade7c3',
			fname = 'Similan',
			lname = 'Tanjindaprateep',
			email = 'Similan.t_s18@vistec.ac.th',
			username = 'pipsimta',
			homepageId = '1',
			last_modified = '2019-12-05 18:53:30',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cc8fe8e22985',
			language = 'en_us',
			lastlogin = '2019-12-05 18:53:30',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '383';
2019-12-05T18:53:30+07:00 [8833] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 18:53:30' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 18:53:30' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '383' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383');
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:53:30+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '854e842dbd9061fa85222a7d2ddb4c09e73e2ec7',
			salt = '2eade7c3',
			fname = 'Similan',
			lname = 'Tanjindaprateep',
			email = 'Similan.t_s18@vistec.ac.th',
			username = 'pipsimta',
			homepageId = '1',
			last_modified = '2019-12-05 18:53:31',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cc8fe8e22985',
			language = 'en_us',
			lastlogin = '2019-12-05 18:53:30',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '383';
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('383' = -1 OR ru.user_id = '383') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T18:53:31+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '383' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383');
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:53:34+07:00 [8833] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '383' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383');
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:53:39+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:53:49+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-07 10:00:00' AND ri.start_date <= '2019-12-07 18:00:00') OR
					(ri.end_date >= '2019-12-07 10:00:00' AND ri.end_date <= '2019-12-07 18:00:00') OR
					(ri.start_date <= '2019-12-07 10:00:00' AND ri.end_date >= '2019-12-07 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-07 10:00:00' AND bi.start_date <= '2019-12-07 18:00:00')
				OR
				(bi.end_date >= '2019-12-07 10:00:00' AND bi.end_date <= '2019-12-07 18:00:00')
				OR
				(bi.start_date <= '2019-12-07 10:00:00' AND bi.end_date >= '2019-12-07 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '383' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383');
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 18:54:04', null, null, '0', false, 'none', '', '1', '1', '383', 'Powder mode');
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6488', '2', '1');
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '6', '6488');
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '6488');
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6488');
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '6488');
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-07 10:00:00', '2019-12-07 18:00:00', '5de8efdc45552985969746', '6488', null);
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6449', '383', '1');
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:54:04+07:00 [2455] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '383';
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '383';
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '383' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '383';
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '383';
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '383' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '383' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '383');
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:54:05+07:00 [2449] DEBUG sql - [User=Similan Tanjindaprateep (Similan.t_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maokamim' OR email = 'maokamim') AND status_id = 1;
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maokamim' OR email = 'maokamim');
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba9446d1ca625baaec1ff0cf752027ea5e3446d7',
			salt = '18410f10',
			fname = 'Kamonnart',
			lname = 'Imwiset',
			email = '1530307@vistec.ac.th',
			username = 'maokamim',
			homepageId = '1',
			last_modified = '2019-12-05 18:54:15',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f35c775604',
			language = 'en_us',
			lastlogin = '2019-12-05 18:54:15',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '479';
2019-12-05T18:54:15+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 18:54:15' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 18:54:15' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:15+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba9446d1ca625baaec1ff0cf752027ea5e3446d7',
			salt = '18410f10',
			fname = 'Kamonnart',
			lname = 'Imwiset',
			email = '1530307@vistec.ac.th',
			username = 'maokamim',
			homepageId = '1',
			last_modified = '2019-12-05 18:54:16',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f35c775604',
			language = 'en_us',
			lastlogin = '2019-12-05 18:54:15',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '479';
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('479' = -1 OR ru.user_id = '479') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T18:54:16+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:54:19+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:54:25+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:35+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-07 22:00:00' AND ri.start_date <= '2019-12-07 23:00:00') OR
					(ri.end_date >= '2019-12-07 22:00:00' AND ri.end_date <= '2019-12-07 23:00:00') OR
					(ri.start_date <= '2019-12-07 22:00:00' AND ri.end_date >= '2019-12-07 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-07 22:00:00' AND bi.start_date <= '2019-12-07 23:00:00')
				OR
				(bi.end_date >= '2019-12-07 22:00:00' AND bi.end_date <= '2019-12-07 23:00:00')
				OR
				(bi.start_date <= '2019-12-07 22:00:00' AND bi.end_date >= '2019-12-07 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 18:54:47', null, null, '0', false, 'none', '', '1', '1', '479', 'Powder mode');
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6489', '2', '1');
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '6', '6489');
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '6489');
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6489');
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '6489');
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-07 22:00:00', '2019-12-07 23:00:00', '5de8f0077e90d700648955', '6489', null);
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6450', '479', '1');
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:47+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:54:49+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:54:51+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-07 23:00:00' AND ri.start_date <= '2019-12-08 00:00:00') OR
					(ri.end_date >= '2019-12-07 23:00:00' AND ri.end_date <= '2019-12-08 00:00:00') OR
					(ri.start_date <= '2019-12-07 23:00:00' AND ri.end_date >= '2019-12-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-07 23:00:00' AND bi.start_date <= '2019-12-08 00:00:00')
				OR
				(bi.end_date >= '2019-12-07 23:00:00' AND bi.end_date <= '2019-12-08 00:00:00')
				OR
				(bi.start_date <= '2019-12-07 23:00:00' AND bi.end_date >= '2019-12-08 00:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 18:55:04', null, null, '0', false, 'none', '', '1', '1', '479', 'Powder mode');
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6490', '2', '1');
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '6', '6490');
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '6490');
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6490');
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '6490');
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-07 23:00:00', '2019-12-08 00:00:00', '5de8f018aa9f7027688704', '6490', null);
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6451', '479', '1');
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:55:04+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:55:06+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:04+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-06 15:00:00' AND ri.start_date <= '2019-12-06 17:00:00') OR
					(ri.end_date >= '2019-12-06 15:00:00' AND ri.end_date <= '2019-12-06 17:00:00') OR
					(ri.start_date <= '2019-12-06 15:00:00' AND ri.end_date >= '2019-12-06 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-06 15:00:00' AND bi.start_date <= '2019-12-06 17:00:00')
				OR
				(bi.end_date >= '2019-12-06 15:00:00' AND bi.end_date <= '2019-12-06 17:00:00')
				OR
				(bi.start_date <= '2019-12-06 15:00:00' AND bi.end_date >= '2019-12-06 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 18:57:13', null, null, '0', false, 'none', '', '1', '1', '479', 'Powder mode');
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6491', '2', '1');
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '6', '6491');
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '6491');
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6491');
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '6491');
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-06 15:00:00', '2019-12-06 17:00:00', '5de8f099b2e42888969564', '6491', null);
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6452', '479', '1');
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:13+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:57:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:21+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:36+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:57:36+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-12-05T18:57:36+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-08 10:00:00' AND ri.start_date <= '2019-12-08 12:00:00') OR
					(ri.end_date >= '2019-12-08 10:00:00' AND ri.end_date <= '2019-12-08 12:00:00') OR
					(ri.start_date <= '2019-12-08 10:00:00' AND ri.end_date >= '2019-12-08 12:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-08 10:00:00' AND bi.start_date <= '2019-12-08 12:00:00')
				OR
				(bi.end_date >= '2019-12-08 10:00:00' AND bi.end_date <= '2019-12-08 12:00:00')
				OR
				(bi.start_date <= '2019-12-08 10:00:00' AND bi.end_date >= '2019-12-08 12:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 18:57:37', null, null, '0', false, 'none', '', '1', '1', '479', 'Powder mode');
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6492', '2', '1');
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '6', '6492');
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '6492');
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '6492');
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '6492');
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-08 10:00:00', '2019-12-08 12:00:00', '5de8f0b100571019384589', '6492', null);
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6453', '479', '1');
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:37+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T18:57:38+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:01:21+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:01:53+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:02:10+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:07:49+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:07:54+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:09:16+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:09:22+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:09:52+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:10:04+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:10:07+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:10:23+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '26';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '26';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '26';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 19:00:00' AND ri.start_date <= '2019-12-09 23:00:00') OR
					(ri.end_date >= '2019-12-09 19:00:00' AND ri.end_date <= '2019-12-09 23:00:00') OR
					(ri.start_date <= '2019-12-09 19:00:00' AND ri.end_date >= '2019-12-09 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 19:00:00' AND bi.start_date <= '2019-12-09 23:00:00')
				OR
				(bi.end_date >= '2019-12-09 19:00:00' AND bi.end_date <= '2019-12-09 23:00:00')
				OR
				(bi.start_date <= '2019-12-09 19:00:00' AND bi.end_date >= '2019-12-09 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '21';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 19:10:53' AND ri.start_date <= '2019-12-10 00:00:00') OR
					(ri.end_date >= '2019-12-05 19:10:53' AND ri.end_date <= '2019-12-10 00:00:00') OR
					(ri.start_date <= '2019-12-05 19:10:53' AND ri.end_date >= '2019-12-10 00:00:00')) AND
					('479' = -1 OR ru.user_id = '479') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 19:10:53', null, null, '0', false, 'none', '', '1', '1', '479', null);
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6493', '26', '1');
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('54', '1', '8', '6493');
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('55', '1', '-', '6493');
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('56', '1', '-', '6493');
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('33', '1', 'Powders', '6493');
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('32', '1', '', '6493');
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-09 19:00:00', '2019-12-09 23:00:00', '5de8f3cdbf047582407860', '6493', null);
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6454', '479', '1');
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:10:53+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:10:55+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:10:59+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '26';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '26';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '26';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 23:00:00' AND ri.start_date <= '2019-12-10 00:00:00') OR
					(ri.end_date >= '2019-12-09 23:00:00' AND ri.end_date <= '2019-12-10 00:00:00') OR
					(ri.start_date <= '2019-12-09 23:00:00' AND ri.end_date >= '2019-12-10 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 23:00:00' AND bi.start_date <= '2019-12-10 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 23:00:00' AND bi.end_date <= '2019-12-10 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 23:00:00' AND bi.end_date >= '2019-12-10 00:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '21';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-05 19:11:15' AND ri.start_date <= '2019-12-11 00:00:00') OR
					(ri.end_date >= '2019-12-05 19:11:15' AND ri.end_date <= '2019-12-11 00:00:00') OR
					(ri.start_date <= '2019-12-05 19:11:15' AND ri.end_date >= '2019-12-11 00:00:00')) AND
					('479' = -1 OR ru.user_id = '479') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-12-05 19:11:15', null, null, '0', false, 'none', '', '1', '1', '479', null);
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('6494', '26', '1');
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('54', '1', '8', '6494');
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('55', '1', '-', '6494');
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('56', '1', '-', '6494');
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('33', '1', 'Powders', '6494');
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('32', '1', '', '6494');
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-12-09 23:00:00', '2019-12-10 00:00:00', '5de8f3e3a736d599185104', '6494', null);
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('6455', '479', '1');
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:11:15+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-12-05T19:11:17+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1830301@vistec.ac.th' OR email = '1830301@vistec.ac.th') AND status_id = 1;
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1830301@vistec.ac.th' OR email = '1830301@vistec.ac.th');
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e4c322e60c271fe86d0acf74bc7849fd418d7690',
			salt = '73149551',
			fname = 'Jitpisut',
			lname = 'Poolwong',
			email = '1830301@vistec.ac.th',
			username = 'vdejitpo',
			homepageId = '1',
			last_modified = '2019-12-05 19:34:51',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f136fabfbb',
			language = 'en_us',
			lastlogin = '2019-12-05 19:34:51',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '389';
2019-12-05T19:34:51+07:00 [2455] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:34:51+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'adfthale' OR email = 'adfthale') AND status_id = 1;
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'adfthale' OR email = 'adfthale');
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e6b03b3e6f4afb35694e6f132cf0390f88719489',
			salt = '0e76756a',
			fname = 'Tharit',
			lname = 'Lerdwiriyanupap',
			email = '1630307@vistec.ac.th',
			username = 'adfthale',
			homepageId = '1',
			last_modified = '2019-12-05 19:38:37',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b7055ef793',
			language = 'en_us',
			lastlogin = '2019-12-05 19:38:37',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '444';
2019-12-05T19:38:37+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-12-05 19:38:37' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-12-05 19:38:37' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:37+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:37+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:38:37+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:38:37+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:38+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:38:38+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:38:38+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:38:38+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e6b03b3e6f4afb35694e6f132cf0390f88719489',
			salt = '0e76756a',
			fname = 'Tharit',
			lname = 'Lerdwiriyanupap',
			email = '1630307@vistec.ac.th',
			username = 'adfthale',
			homepageId = '1',
			last_modified = '2019-12-05 19:38:38',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b7055ef793',
			language = 'en_us',
			lastlogin = '2019-12-05 19:38:37',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '444';
2019-12-05T19:38:38+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-11-25 00:00:00' AND ri.start_date <= '2020-01-07 00:00:00') OR
					(ri.end_date >= '2019-11-25 00:00:00' AND ri.end_date <= '2020-01-07 00:00:00') OR
					(ri.start_date <= '2019-11-25 00:00:00' AND ri.end_date >= '2020-01-07 00:00:00')) AND
					('444' = -1 OR ru.user_id = '444') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-12-05T19:38:38+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:38:41+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:38:44+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:39:19+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:39:36+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:39:37+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:39:43+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:39:47+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:39:59+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-12-05T19:40:09+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:40:15+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:40:18+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:40:20+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:40:21+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:40:21+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:40:21+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:40:21+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:40:22+07:00 [8833] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:40:26+07:00 [2455] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '444';
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '444';
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '444' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '444';
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '444';
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '444' AND r.resource_id = urp.resource_id;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '444' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '444');
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:40:32+07:00 [2449] DEBUG sql - [User=Tharit Lerdwiriyanupap (1630307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maokamim' OR email = 'maokamim') AND status_id = 1;
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maokamim' OR email = 'maokamim');
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba9446d1ca625baaec1ff0cf752027ea5e3446d7',
			salt = '18410f10',
			fname = 'Kamonnart',
			lname = 'Imwiset',
			email = '1530307@vistec.ac.th',
			username = 'maokamim',
			homepageId = '1',
			last_modified = '2019-12-05 19:44:23',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f35c775604',
			language = 'en_us',
			lastlogin = '2019-12-05 19:44:23',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '479';
2019-12-05T19:44:23+07:00 [2449] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:44:23+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:44:26+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:44:32+07:00 [8833] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:45:07+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5de8f099b2e42888969564' AND
			rs.status_id <> 2;
2019-12-05T19:45:07+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '6491'
		ORDER BY resource_level_id, r.name;
2019-12-05T19:45:07+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '6452';
2019-12-05T19:45:07+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '6491';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '6491';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '6491';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '6491';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '6452';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:45:08+07:00 [2449] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '479';
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '479';
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '479' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '479';
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '479';
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '479' AND r.resource_id = urp.resource_id;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '479' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '479');
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-02 00:00:00' AND ri.start_date <= '2019-12-09 00:00:00') OR
					(ri.end_date >= '2019-12-02 00:00:00' AND ri.end_date <= '2019-12-09 00:00:00') OR
					(ri.start_date <= '2019-12-02 00:00:00' AND ri.end_date >= '2019-12-09 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-02 00:00:00' AND bi.start_date <= '2019-12-09 00:00:00')
				OR
				(bi.end_date >= '2019-12-02 00:00:00' AND bi.end_date <= '2019-12-09 00:00:00')
				OR
				(bi.start_date <= '2019-12-02 00:00:00' AND bi.end_date >= '2019-12-09 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:45:12+07:00 [2455] DEBUG sql - [User=Kamonnart Imwiset (1530307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-12-05T19:45:43+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-12-09 00:00:00' AND ri.start_date <= '2019-12-16 00:00:00') OR
					(ri.end_date >= '2019-12-09 00:00:00' AND ri.end_date <= '2019-12-16 00:00:00') OR
					(ri.start_date <= '2019-12-09 00:00:00' AND ri.end_date >= '2019-12-16 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','30','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-12-05T19:45:44+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-12-05T19:45:44+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-12-09 00:00:00' AND bi.start_date <= '2019-12-16 00:00:00')
				OR
				(bi.end_date >= '2019-12-09 00:00:00' AND bi.end_date <= '2019-12-16 00:00:00')
				OR
				(bi.start_date <= '2019-12-09 00:00:00' AND bi.end_date >= '2019-12-16 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-12-05T19:45:44+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-12-05T19:45:44+07:00 [2449] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';

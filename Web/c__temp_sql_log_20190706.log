2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khptipja' OR email = 'khptipja') AND status_id = 1;
2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'khptipja' OR email = 'khptipja');
2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba91b73a522395bf7bc376626b9e051e67067ac4',
			salt = '0cd9f08c',
			fname = 'Tiphanan',
			lname = 'Janijai',
			email = 'tiphanan.jan@gmail.com',
			username = 'khptipja',
			homepageId = '1',
			last_modified = '2019-07-06 10:33:04',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d086a1114b8a',
			language = 'en_us',
			lastlogin = '2019-07-06 10:33:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '559';
2019-07-06T10:33:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 10:33:04' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 10:33:04' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:04+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '559';
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba91b73a522395bf7bc376626b9e051e67067ac4',
			salt = '0cd9f08c',
			fname = 'Tiphanan',
			lname = 'Janijai',
			email = 'tiphanan.jan@gmail.com',
			username = 'khptipja',
			homepageId = '1',
			last_modified = '2019-07-06 10:33:05',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d086a1114b8a',
			language = 'en_us',
			lastlogin = '2019-07-06 10:33:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '559';
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('559' = -1 OR ru.user_id = '559') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T10:33:05+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T10:33:07+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T10:33:12+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mossorko' OR email = 'mossorko') AND status_id = 1;
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mossorko' OR email = 'mossorko');
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'a18c23d08b26657284b3be92f21f1cac786b7cac',
			salt = '5f542d8d',
			fname = 'Soracha',
			lname = 'Kosasang',
			email = 'soracha.k_s16@vistec.ac.th',
			username = 'mossorko',
			homepageId = '1',
			last_modified = '2019-07-06 11:24:18',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9c3b4e6f220',
			language = 'en_us',
			lastlogin = '2019-07-06 11:24:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '517';
2019-07-06T11:24:18+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 11:24:18' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 11:24:18' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:18+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'a18c23d08b26657284b3be92f21f1cac786b7cac',
			salt = '5f542d8d',
			fname = 'Soracha',
			lname = 'Kosasang',
			email = 'soracha.k_s16@vistec.ac.th',
			username = 'mossorko',
			homepageId = '1',
			last_modified = '2019-07-06 11:24:19',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9c3b4e6f220',
			language = 'en_us',
			lastlogin = '2019-07-06 11:24:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '517';
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:24:19+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:24:25+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:24:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:24:39+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:25:34+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-11 09:00:00' AND ri.start_date <= '2019-07-11 11:00:00') OR
					(ri.end_date >= '2019-07-11 09:00:00' AND ri.end_date <= '2019-07-11 11:00:00') OR
					(ri.start_date <= '2019-07-11 09:00:00' AND ri.end_date >= '2019-07-11 11:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-11 09:00:00' AND bi.start_date <= '2019-07-11 11:00:00')
				OR
				(bi.end_date >= '2019-07-11 09:00:00' AND bi.end_date <= '2019-07-11 11:00:00')
				OR
				(bi.start_date <= '2019-07-11 09:00:00' AND bi.end_date >= '2019-07-11 11:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 11:25:55' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-06 11:25:55' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-06 11:25:55' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 11:25:55', null, null, '0', false, 'none', '', '1', '1', '517', null);
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3072', '19', '1');
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-11 09:00:00', '2019-07-11 11:00:00', '5d2022d3d19e0883466588', '3072', null);
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3059', '517', '1');
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:25:55+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:25:57+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:25:57+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:25:57+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:25:57+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:25:58+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:13+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:26:22+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:26:27+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:28+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-15 00:00:00' AND ri.start_date <= '2019-07-22 00:00:00') OR
					(ri.end_date >= '2019-07-15 00:00:00' AND ri.end_date <= '2019-07-22 00:00:00') OR
					(ri.start_date <= '2019-07-15 00:00:00' AND ri.end_date >= '2019-07-22 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-15 00:00:00' AND bi.start_date <= '2019-07-22 00:00:00')
				OR
				(bi.end_date >= '2019-07-15 00:00:00' AND bi.end_date <= '2019-07-22 00:00:00')
				OR
				(bi.start_date <= '2019-07-15 00:00:00' AND bi.end_date >= '2019-07-22 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-15 00:00:00' AND ri.start_date <= '2019-07-22 00:00:00') OR
					(ri.end_date >= '2019-07-15 00:00:00' AND ri.end_date <= '2019-07-22 00:00:00') OR
					(ri.start_date <= '2019-07-15 00:00:00' AND ri.end_date >= '2019-07-22 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-15 00:00:00' AND bi.start_date <= '2019-07-22 00:00:00')
				OR
				(bi.end_date >= '2019-07-15 00:00:00' AND bi.end_date <= '2019-07-22 00:00:00')
				OR
				(bi.start_date <= '2019-07-15 00:00:00' AND bi.end_date >= '2019-07-22 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:32+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:35+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:26:36+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:26:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:26:39+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:26:39+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:26:39+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:26:39+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:39+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:26:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:27:08+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d2022d3d19e0883466588' AND
			rs.status_id <> 2;
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3072'
		ORDER BY resource_level_id, r.name;
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3059';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3072';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3072';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3072';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3072';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3059';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:27:11+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:27:22+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:27:26+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-11 13:00:00' AND ri.start_date <= '2019-07-11 15:00:00') OR
					(ri.end_date >= '2019-07-11 13:00:00' AND ri.end_date <= '2019-07-11 15:00:00') OR
					(ri.start_date <= '2019-07-11 13:00:00' AND ri.end_date >= '2019-07-11 15:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-11 13:00:00' AND bi.start_date <= '2019-07-11 15:00:00')
				OR
				(bi.end_date >= '2019-07-11 13:00:00' AND bi.end_date <= '2019-07-11 15:00:00')
				OR
				(bi.start_date <= '2019-07-11 13:00:00' AND bi.end_date >= '2019-07-11 15:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 11:27:43' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-06 11:27:43' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-06 11:27:43' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 11:27:43', null, null, '0', false, 'none', '', '1', '1', '517', null);
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3073', '19', '1');
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-11 13:00:00', '2019-07-11 15:00:00', '5d20233f3af58311143874', '3073', null);
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3060', '517', '1');
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:27:43+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:27:44+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d2022d3d19e0883466588' AND
			rs.status_id <> 2;
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3072'
		ORDER BY resource_level_id, r.name;
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3059';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3072';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3072';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3072';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3072';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3059';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:27:56+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:28:01+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:28:05+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:28:07+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:28:11+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-11 10:00:00' AND ri.start_date <= '2019-07-11 12:00:00') OR
					(ri.end_date >= '2019-07-11 10:00:00' AND ri.end_date <= '2019-07-11 12:00:00') OR
					(ri.start_date <= '2019-07-11 10:00:00' AND ri.end_date >= '2019-07-11 12:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-11 10:00:00' AND bi.start_date <= '2019-07-11 12:00:00')
				OR
				(bi.end_date >= '2019-07-11 10:00:00' AND bi.end_date <= '2019-07-11 12:00:00')
				OR
				(bi.start_date <= '2019-07-11 10:00:00' AND bi.end_date >= '2019-07-11 12:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 11:28:21' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-06 11:28:21' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-06 11:28:21' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 11:28:21', null, null, '0', false, 'none', '', '1', '1', '517', null);
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3074', '19', '1');
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-11 10:00:00', '2019-07-11 12:00:00', '5d20236595b94424146099', '3074', null);
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3061', '517', '1');
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:28:21+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:28:23+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:29:03+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:29:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:29:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:29:04+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:29:19+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 11:30:37' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 11:30:37' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:30:37+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'a18c23d08b26657284b3be92f21f1cac786b7cac',
			salt = '5f542d8d',
			fname = 'Soracha',
			lname = 'Kosasang',
			email = 'soracha.k_s16@vistec.ac.th',
			username = 'mossorko',
			homepageId = '1',
			last_modified = '2019-07-06 11:30:38',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9c3b4e6f220',
			language = 'en_us',
			lastlogin = '2019-07-06 11:24:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '517';
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:30:38+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:30:41+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:31:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:31:27+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:31:27+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:31:27+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 11:31:31' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 11:31:31' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:31+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'a18c23d08b26657284b3be92f21f1cac786b7cac',
			salt = '5f542d8d',
			fname = 'Soracha',
			lname = 'Kosasang',
			email = 'soracha.k_s16@vistec.ac.th',
			username = 'mossorko',
			homepageId = '1',
			last_modified = '2019-07-06 11:31:32',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9c3b4e6f220',
			language = 'en_us',
			lastlogin = '2019-07-06 11:24:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '517';
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:31:32+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:31:38+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:31:46+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 11:31:55' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 11:31:55' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:55+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'a18c23d08b26657284b3be92f21f1cac786b7cac',
			salt = '5f542d8d',
			fname = 'Soracha',
			lname = 'Kosasang',
			email = 'soracha.k_s16@vistec.ac.th',
			username = 'mossorko',
			homepageId = '1',
			last_modified = '2019-07-06 11:31:56',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9c3b4e6f220',
			language = 'en_us',
			lastlogin = '2019-07-06 11:24:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '517';
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:31:56+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:32:00+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:32:04+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:33:12+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:33:26+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T11:34:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:34:52+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:34:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:05+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-11 15:00:00' AND ri.start_date <= '2019-07-11 17:00:00') OR
					(ri.end_date >= '2019-07-11 15:00:00' AND ri.end_date <= '2019-07-11 17:00:00') OR
					(ri.start_date <= '2019-07-11 15:00:00' AND ri.end_date >= '2019-07-11 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-11 15:00:00' AND bi.start_date <= '2019-07-11 17:00:00')
				OR
				(bi.end_date >= '2019-07-11 15:00:00' AND bi.end_date <= '2019-07-11 17:00:00')
				OR
				(bi.start_date <= '2019-07-11 15:00:00' AND bi.end_date >= '2019-07-11 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 11:35:32' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-06 11:35:32' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-06 11:35:32' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 11:35:32', null, null, '0', false, 'none', '', '1', '1', '517', null);
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3075', '19', '1');
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-11 15:00:00', '2019-07-11 17:00:00', '5d2025143fd41656505419', '3075', null);
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3062', '517', '1');
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:32+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:33+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:43+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-11 09:00:00' AND ri.start_date <= '2019-07-11 10:00:00') OR
					(ri.end_date >= '2019-07-11 09:00:00' AND ri.end_date <= '2019-07-11 10:00:00') OR
					(ri.start_date <= '2019-07-11 09:00:00' AND ri.end_date >= '2019-07-11 10:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-11 09:00:00' AND bi.start_date <= '2019-07-11 10:00:00')
				OR
				(bi.end_date >= '2019-07-11 09:00:00' AND bi.end_date <= '2019-07-11 10:00:00')
				OR
				(bi.start_date <= '2019-07-11 09:00:00' AND bi.end_date >= '2019-07-11 10:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 11:35:47' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-06 11:35:47' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-06 11:35:47' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 11:35:47', null, null, '0', false, 'none', '', '1', '1', '517', null);
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3076', '19', '1');
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-11 09:00:00', '2019-07-11 10:00:00', '5d202523d0ff5117326663', '3076', null);
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3063', '517', '1');
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:47+07:00 [3895] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:49+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:54+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-11 17:00:00' AND ri.start_date <= '2019-07-11 18:00:00') OR
					(ri.end_date >= '2019-07-11 17:00:00' AND ri.end_date <= '2019-07-11 18:00:00') OR
					(ri.start_date <= '2019-07-11 17:00:00' AND ri.end_date >= '2019-07-11 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-11 17:00:00' AND bi.start_date <= '2019-07-11 18:00:00')
				OR
				(bi.end_date >= '2019-07-11 17:00:00' AND bi.end_date <= '2019-07-11 18:00:00')
				OR
				(bi.start_date <= '2019-07-11 17:00:00' AND bi.end_date >= '2019-07-11 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 11:35:57' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-06 11:35:57' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-06 11:35:57' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('517' = -1 OR ru.user_id = '517') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 11:35:57', null, null, '0', false, 'none', '', '1', '1', '517', null);
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3077', '19', '1');
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-11 17:00:00', '2019-07-11 18:00:00', '5d20252d36f0c152385881', '3077', null);
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3064', '517', '1');
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '517';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '517';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '517' AND (null is null OR r.role_level IN (null) );
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '517';
2019-07-06T11:35:57+07:00 [3863] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '517';
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '517' AND r.resource_id = urp.resource_id;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '517' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '517');
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T11:35:59+07:00 [12231] DEBUG sql - [User=Soracha Kosasang (soracha.k_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpeepo' OR email = 'chwpeepo') AND status_id = 1;
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpeepo' OR email = 'chwpeepo');
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '67ec2befbe398595115b87e0c364ca0e12f4e9f4',
			salt = '2820bc95',
			fname = 'Peerapol',
			lname = 'Pornsetmetakul',
			email = 'Peerapol.p_s18@vistec.ac.th',
			username = 'chwpeepo',
			homepageId = '2',
			last_modified = '2019-07-06 12:03:14',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9308f54ae33',
			language = 'en_us',
			lastlogin = '2019-07-06 12:03:14',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '416';
2019-07-06T12:03:14+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T12:03:14+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T12:03:17+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T12:03:18+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T12:03:18+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T12:03:29+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T12:03:34+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T12:03:51+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T12:03:53+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T12:59:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpeepo' OR email = 'chwpeepo') AND status_id = 1;
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpeepo' OR email = 'chwpeepo') AND status_id = 1;
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpeepo' OR email = 'chwpeepo');
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '67ec2befbe398595115b87e0c364ca0e12f4e9f4',
			salt = '2820bc95',
			fname = 'Peerapol',
			lname = 'Pornsetmetakul',
			email = 'Peerapol.p_s18@vistec.ac.th',
			username = 'chwpeepo',
			homepageId = '2',
			last_modified = '2019-07-06 12:59:33',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9308f54ae33',
			language = 'en_us',
			lastlogin = '2019-07-06 12:59:33',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '416';
2019-07-06T12:59:33+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T12:59:33+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T12:59:36+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '416';
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-07-06T13:00:00+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-07 14:00:00' AND ri.start_date <= '2019-07-07 15:00:00') OR
					(ri.end_date >= '2019-07-07 14:00:00' AND ri.end_date <= '2019-07-07 15:00:00') OR
					(ri.start_date <= '2019-07-07 14:00:00' AND ri.end_date >= '2019-07-07 15:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-07 14:00:00' AND bi.start_date <= '2019-07-07 15:00:00')
				OR
				(bi.end_date >= '2019-07-07 14:00:00' AND bi.end_date <= '2019-07-07 15:00:00')
				OR
				(bi.start_date <= '2019-07-07 14:00:00' AND bi.end_date >= '2019-07-07 15:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 13:00:05' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-06 13:00:05' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-06 13:00:05' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('416' = -1 OR ru.user_id = '416') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 13:00:05', null, null, '0', false, 'none', '', '1', '1', '416', null);
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3078', '19', '1');
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-07 14:00:00', '2019-07-07 15:00:00', '5d2038e54bf98928529402', '3078', null);
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3065', '416', '1');
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-07-06T13:00:05+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T13:00:09+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '416';
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-07-06T13:00:10+07:00 [3863] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '416';
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T13:00:12+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T13:00:13+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T13:00:13+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T13:00:13+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T13:00:20+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khpweepa' OR email = 'khpweepa') AND status_id = 1;
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'khpweepa' OR email = 'khpweepa');
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b5be60a4aab00aec38630eaa8af09c7c193d4cd3',
			salt = '3c312ec5',
			fname = 'Weerapha',
			lname = 'Panatdasirisuk',
			email = 'gluay88weerapha@gmail.com',
			username = 'khpweepa',
			homepageId = '1',
			last_modified = '2019-07-06 15:13:13',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b4ed41bc9',
			language = 'en_us',
			lastlogin = '2019-07-06 15:13:13',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '438';
2019-07-06T15:13:13+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 15:13:14' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 15:13:14' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '438';
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:14+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '438';
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b5be60a4aab00aec38630eaa8af09c7c193d4cd3',
			salt = '3c312ec5',
			fname = 'Weerapha',
			lname = 'Panatdasirisuk',
			email = 'gluay88weerapha@gmail.com',
			username = 'khpweepa',
			homepageId = '1',
			last_modified = '2019-07-06 15:13:14',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b4ed41bc9',
			language = 'en_us',
			lastlogin = '2019-07-06 15:13:13',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '438';
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('438' = -1 OR ru.user_id = '438') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T15:13:14+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T15:13:17+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T15:13:21+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T15:13:33+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T15:13:37+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vipwanli' OR email = 'vipwanli') AND status_id = 1;
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vipwanli' OR email = 'vipwanli');
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '463';
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '463' AND (null is null OR r.role_level IN (null) );
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '463';
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '463';
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '1e7dd52375c8fbeb0658884e07ad72ef5c6fcce9',
			salt = '0e7af452',
			fname = 'Wan',
			lname = 'Li',
			email = '1730102@vistec.ac.th',
			username = 'vipwanli',
			homepageId = '1',
			last_modified = '2019-07-06 19:47:23',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d1db9c6435bd',
			language = 'en_us',
			lastlogin = '2019-07-06 19:47:23',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '463';
2019-07-06T19:47:23+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 19:47:23' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 19:47:23' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '463' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463');
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '463';
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '463';
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '463' AND (null is null OR r.role_level IN (null) );
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '463';
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '463';
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:47:23+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '463';
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '463';
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '463' AND (null is null OR r.role_level IN (null) );
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '463';
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '463';
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '1e7dd52375c8fbeb0658884e07ad72ef5c6fcce9',
			salt = '0e7af452',
			fname = 'Wan',
			lname = 'Li',
			email = '1730102@vistec.ac.th',
			username = 'vipwanli',
			homepageId = '1',
			last_modified = '2019-07-06 19:47:30',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d1db9c6435bd',
			language = 'en_us',
			lastlogin = '2019-07-06 19:47:23',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '463';
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('463' = -1 OR ru.user_id = '463') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T19:47:30+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '463' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463');
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T19:47:51+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '463' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463');
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T19:48:01+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T20:11:12+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1630107@vistec.ac.th' OR email = '1630107@vistec.ac.th') AND status_id = 1;
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1630107@vistec.ac.th' OR email = '1630107@vistec.ac.th') AND status_id = 1;
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1630107@vistec.ac.th' OR email = '1630107@vistec.ac.th');
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '435';
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '435' AND r.resource_id = urp.resource_id;
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '435' AND (null is null OR r.role_level IN (null) );
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '435';
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '435';
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '731ff72f6aefdf96ee9790e31dd18065ae1504fd',
			salt = '5f782dc9',
			fname = 'Supajittra',
			lname = 'Yimthachote',
			email = '1630107@vistec.ac.th',
			username = 'khpsupyi',
			homepageId = '1',
			last_modified = '2019-07-06 20:11:17',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b777358f4',
			language = 'en_us',
			lastlogin = '2019-07-06 20:11:17',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '435';
2019-07-06T20:11:17+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T20:14:15+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1630107@vistec.ac.th' OR email = '1630107@vistec.ac.th') AND status_id = 1;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '435' AND r.resource_id = urp.resource_id;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '435' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '435')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '435');
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T20:14:15+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '435';
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '435';
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '435' AND r.resource_id = urp.resource_id;
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '435' AND (null is null OR r.role_level IN (null) );
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '435';
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '435';
2019-07-06T20:14:28+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '435';
2019-07-06T20:14:38+07:00 [12231] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T20:14:38+07:00 [12231] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '28';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '28';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '28';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 21:00:00' AND ri.start_date <= '2019-07-06 23:00:00') OR
					(ri.end_date >= '2019-07-06 21:00:00' AND ri.end_date <= '2019-07-06 23:00:00') OR
					(ri.start_date <= '2019-07-06 21:00:00' AND ri.end_date >= '2019-07-06 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-06 21:00:00' AND bi.start_date <= '2019-07-06 23:00:00')
				OR
				(bi.end_date >= '2019-07-06 21:00:00' AND bi.end_date <= '2019-07-06 23:00:00')
				OR
				(bi.start_date <= '2019-07-06 21:00:00' AND bi.end_date >= '2019-07-06 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '435' AND r.resource_id = urp.resource_id;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '435' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '435')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '435');
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '435';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '435';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '435' AND r.resource_id = urp.resource_id;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '435' AND (null is null OR r.role_level IN (null) );
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '435';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '435';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '22';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-06 20:14:44' AND ri.start_date <= '2019-07-07 00:00:00') OR
					(ri.end_date >= '2019-07-06 20:14:44' AND ri.end_date <= '2019-07-07 00:00:00') OR
					(ri.start_date <= '2019-07-06 20:14:44' AND ri.end_date >= '2019-07-07 00:00:00')) AND
					('435' = -1 OR ru.user_id = '435') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 20:14:44', null, null, '0', false, 'none', '', '1', '1', '435', null);
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3079', '28', '1');
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-06 21:00:00', '2019-07-06 23:00:00', '5d209ec463aa8029480198', '3079', null);
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3066', '435', '1');
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '435';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '435';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '435' AND r.resource_id = urp.resource_id;
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '435' AND (null is null OR r.role_level IN (null) );
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '435';
2019-07-06T20:14:44+07:00 [3895] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '435';
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '435' AND r.resource_id = urp.resource_id;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '435' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '435')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '435');
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T20:14:45+07:00 [3863] DEBUG sql - [User=Supajittra Yimthachote (1630107@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'adfyupni' OR email = 'adfyupni') AND status_id = 1;
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'adfyupni' OR email = 'adfyupni');
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '448';
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '448' AND r.resource_id = urp.resource_id;
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '448' AND (null is null OR r.role_level IN (null) );
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '448';
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '448';
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c442e049165d848b78a6c0c3e6f4361aac9b5aa8',
			salt = '6f85c851',
			fname = 'Yupaporn',
			lname = 'Niyom',
			email = '1630404@vistec.ac.th',
			username = 'adfyupni',
			homepageId = '1',
			last_modified = '2019-07-06 20:31:52',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88e1d981f3a',
			language = 'en_us',
			lastlogin = '2019-07-06 20:31:52',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '448';
2019-07-06T20:31:52+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 20:31:52' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 20:31:52' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '448' AND r.resource_id = urp.resource_id;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '448' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '448')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '448');
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '448';
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '448';
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '448' AND r.resource_id = urp.resource_id;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '448' AND (null is null OR r.role_level IN (null) );
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '448';
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '448';
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:31:52+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '448';
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '448';
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '448' AND r.resource_id = urp.resource_id;
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '448' AND (null is null OR r.role_level IN (null) );
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '448';
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '448';
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c442e049165d848b78a6c0c3e6f4361aac9b5aa8',
			salt = '6f85c851',
			fname = 'Yupaporn',
			lname = 'Niyom',
			email = '1630404@vistec.ac.th',
			username = 'adfyupni',
			homepageId = '1',
			last_modified = '2019-07-06 20:31:53',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88e1d981f3a',
			language = 'en_us',
			lastlogin = '2019-07-06 20:31:52',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '448';
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('448' = -1 OR ru.user_id = '448') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T20:31:53+07:00 [3895] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '448' AND r.resource_id = urp.resource_id;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '448' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '448')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '448');
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T20:31:58+07:00 [3863] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '448' AND r.resource_id = urp.resource_id;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '448' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '448')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '448');
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T20:32:01+07:00 [12231] DEBUG sql - [User=Yupaporn Niyom (1630404@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '463' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463');
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T20:33:45+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '463' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463');
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T20:35:39+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '463' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463');
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T20:37:56+07:00 [12231] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '463' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463');
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T20:38:01+07:00 [3863] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '463' AND r.resource_id = urp.resource_id;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '463' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '463');
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T20:53:56+07:00 [3895] DEBUG sql - [User=Wan Li (1730102@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maochati' OR email = 'maochati') AND status_id = 1;
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maochati' OR email = 'maochati');
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '483';
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '483' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '483';
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '483';
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '416c31e85a1ce96058cf6286042afdc038b6f6a3',
			salt = '7c70e4fc',
			fname = 'Chalunda',
			lname = 'Tirayaphanitchkul',
			email = '1830403@vistec.ac.th',
			username = 'maochati',
			homepageId = '1',
			last_modified = '2019-07-06 23:01:28',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c94bb3eb4aab',
			language = 'en_us',
			lastlogin = '2019-07-06 23:01:28',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '483';
2019-07-06T23:01:28+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-03-25 00:00:00' AND ri.start_date <= '2019-04-01 00:00:00') OR
					(ri.end_date >= '2019-03-25 00:00:00' AND ri.end_date <= '2019-04-01 00:00:00') OR
					(ri.start_date <= '2019-03-25 00:00:00' AND ri.end_date >= '2019-04-01 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-03-25 00:00:00' AND bi.start_date <= '2019-04-01 00:00:00')
				OR
				(bi.end_date >= '2019-03-25 00:00:00' AND bi.end_date <= '2019-04-01 00:00:00')
				OR
				(bi.start_date <= '2019-03-25 00:00:00' AND bi.end_date >= '2019-04-01 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:01:28+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:01:39+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:01:45+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-08 00:00:00' AND ri.start_date <= '2019-07-15 00:00:00') OR
					(ri.end_date >= '2019-07-08 00:00:00' AND ri.end_date <= '2019-07-15 00:00:00') OR
					(ri.start_date <= '2019-07-08 00:00:00' AND ri.end_date >= '2019-07-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-08 00:00:00' AND bi.start_date <= '2019-07-15 00:00:00')
				OR
				(bi.end_date >= '2019-07-08 00:00:00' AND bi.end_date <= '2019-07-15 00:00:00')
				OR
				(bi.start_date <= '2019-07-08 00:00:00' AND bi.end_date >= '2019-07-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:02:20+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:13:49+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1530311@vistec.ac.th' OR email = '1530311@vistec.ac.th') AND status_id = 1;
2019-07-06T23:13:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1530311@vistec.ac.th' OR email = '1530311@vistec.ac.th') AND status_id = 1;
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1530311@vistec.ac.th' OR email = '1530311@vistec.ac.th') AND status_id = 1;
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1530311@vistec.ac.th' OR email = '1530311@vistec.ac.th');
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '466';
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '466' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '466';
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '466';
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'a0fae37c174032f972e86bea18ddae3c46299497',
			salt = '0e35d518',
			fname = 'Phattananawee',
			lname = 'Nalaoh',
			email = '1530311@vistec.ac.th',
			username = 'vipphana',
			homepageId = '1',
			last_modified = '2019-07-06 23:13:59',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8a14df45699',
			language = 'en_us',
			lastlogin = '2019-07-06 23:13:59',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '466';
2019-07-06T23:13:59+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-06 23:13:59' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-06 23:13:59' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '466' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '466')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '466');
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '466';
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '466';
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '466' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '466';
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '466';
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:13:59+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '466';
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '466';
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '466' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '466';
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '466';
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'a0fae37c174032f972e86bea18ddae3c46299497',
			salt = '0e35d518',
			fname = 'Phattananawee',
			lname = 'Nalaoh',
			email = '1530311@vistec.ac.th',
			username = 'vipphana',
			homepageId = '1',
			last_modified = '2019-07-06 23:14:00',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8a14df45699',
			language = 'en_us',
			lastlogin = '2019-07-06 23:13:59',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '466';
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('466' = -1 OR ru.user_id = '466') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T23:14:00+07:00 [3895] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '466' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '466')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '466');
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '466';
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '466';
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '466' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '466';
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '466';
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:07+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '466';
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '466';
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '466' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '466';
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '466';
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'a0fae37c174032f972e86bea18ddae3c46299497',
			salt = '0e35d518',
			fname = 'Phattananawee',
			lname = 'Nalaoh',
			email = '1530311@vistec.ac.th',
			username = 'vipphana',
			homepageId = '1',
			last_modified = '2019-07-06 23:14:08',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8a14df45699',
			language = 'en_us',
			lastlogin = '2019-07-06 23:13:59',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '466';
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '466' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '466')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '466');
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-06T23:14:08+07:00 [12231] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d209ec463aa8029480198' AND
			rs.status_id <> 2;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3079'
		ORDER BY resource_level_id, r.name;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3066';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3079';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3079';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3079';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3079';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3066';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '466';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '466';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '466' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '466' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '466';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '466';
2019-07-06T23:14:12+07:00 [3863] DEBUG sql - [User=Phattananawee Nalaoh (1530311@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '435';
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:14:49+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:14:49+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpeepo' OR email = 'chwpeepo') AND status_id = 1;
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpeepo' OR email = 'chwpeepo') AND status_id = 1;
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpeepo' OR email = 'chwpeepo');
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '67ec2befbe398595115b87e0c364ca0e12f4e9f4',
			salt = '2820bc95',
			fname = 'Peerapol',
			lname = 'Pornsetmetakul',
			email = 'Peerapol.p_s18@vistec.ac.th',
			username = 'chwpeepo',
			homepageId = '2',
			last_modified = '2019-07-06 23:14:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9308f54ae33',
			language = 'en_us',
			lastlogin = '2019-07-06 23:14:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '416';
2019-07-06T23:14:55+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:14:55+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '483';
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '483';
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '483' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '483';
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '483';
2019-07-06T23:15:02+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-07 08:00:00' AND ri.start_date <= '2019-07-07 09:00:00') OR
					(ri.end_date >= '2019-07-07 08:00:00' AND ri.end_date <= '2019-07-07 09:00:00') OR
					(ri.start_date <= '2019-07-07 08:00:00' AND ri.end_date >= '2019-07-07 09:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-07 08:00:00' AND bi.start_date <= '2019-07-07 09:00:00')
				OR
				(bi.end_date >= '2019-07-07 08:00:00' AND bi.end_date <= '2019-07-07 09:00:00')
				OR
				(bi.start_date <= '2019-07-07 08:00:00' AND bi.end_date >= '2019-07-07 09:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '483' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-06 23:16:01', null, null, '0', false, 'none', '', '1', '1', '483', 'Powder mode');
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3080', '2', '1');
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '1', '3080');
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'Powder specimen holder (small diameter)', '3080');
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '3080');
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '3080');
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-07 08:00:00', '2019-07-07 09:00:00', '5d20c941c043f509972499', '3080', null);
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3067', '483', '1');
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '483' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '483';
2019-07-06T23:16:01+07:00 [3895] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:16:11+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpeepo' OR email = 'chwpeepo') AND status_id = 1;
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpeepo' OR email = 'chwpeepo');
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '67ec2befbe398595115b87e0c364ca0e12f4e9f4',
			salt = '2820bc95',
			fname = 'Peerapol',
			lname = 'Pornsetmetakul',
			email = 'Peerapol.p_s18@vistec.ac.th',
			username = 'chwpeepo',
			homepageId = '2',
			last_modified = '2019-07-06 23:44:26',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9308f54ae33',
			language = 'en_us',
			lastlogin = '2019-07-06 23:44:26',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '416';
2019-07-06T23:44:26+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-06T23:44:27+07:00 [12231] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-07-08 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-07-08 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-07-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-01 00:00:00' AND bi.start_date <= '2019-07-08 00:00:00')
				OR
				(bi.end_date >= '2019-07-01 00:00:00' AND bi.end_date <= '2019-07-08 00:00:00')
				OR
				(bi.start_date <= '2019-07-01 00:00:00' AND bi.end_date >= '2019-07-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-06T23:46:36+07:00 [3895] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';

2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwploia' OR email = 'chwploia') AND status_id = 1;
2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwploia' OR email = 'chwploia');
2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c18832fd1234ec671be322524ff4a292dae1e8c5',
			salt = '2801a44b',
			fname = 'Ploychanok',
			lname = 'Iadrat',
			email = 'ploychanok.i_s17@vistec.ac.th',
			username = 'chwploia',
			homepageId = '1',
			last_modified = '2019-04-04 00:34:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f8b69a7b53',
			language = 'en_us',
			lastlogin = '2019-04-04 00:34:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '426';
2019-04-04T00:34:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 00:34:55' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 00:34:55' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:34:55+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c18832fd1234ec671be322524ff4a292dae1e8c5',
			salt = '2801a44b',
			fname = 'Ploychanok',
			lname = 'Iadrat',
			email = 'ploychanok.i_s17@vistec.ac.th',
			username = 'chwploia',
			homepageId = '1',
			last_modified = '2019-04-04 00:34:56',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f8b69a7b53',
			language = 'en_us',
			lastlogin = '2019-04-04 00:34:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '426';
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('426' = -1 OR ru.user_id = '426') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T00:34:56+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T00:34:58+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:35:05+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c18832fd1234ec671be322524ff4a292dae1e8c5',
			salt = '2801a44b',
			fname = 'Ploychanok',
			lname = 'Iadrat',
			email = 'ploychanok.i_s17@vistec.ac.th',
			username = 'chwploia',
			homepageId = '1',
			last_modified = '2019-04-04 00:35:05',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f8b69a7b53',
			language = 'en_us',
			lastlogin = '2019-04-04 00:34:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '426';
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T00:35:05+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c18832fd1234ec671be322524ff4a292dae1e8c5',
			salt = '2801a44b',
			fname = 'Ploychanok',
			lname = 'Iadrat',
			email = 'ploychanok.i_s17@vistec.ac.th',
			username = 'chwploia',
			homepageId = '1',
			last_modified = '2019-04-04 00:35:11',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f8b69a7b53',
			language = 'en_us',
			lastlogin = '2019-04-04 00:34:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '426';
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-04-04T00:35:11+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T00:35:11+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-04-04T00:35:11+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-04-04T00:35:11+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwploia' OR email = 'chwploia') AND status_id = 1;
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwploia' OR email = 'chwploia');
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c18832fd1234ec671be322524ff4a292dae1e8c5',
			salt = '2801a44b',
			fname = 'Ploychanok',
			lname = 'Iadrat',
			email = 'ploychanok.i_s17@vistec.ac.th',
			username = 'chwploia',
			homepageId = '1',
			last_modified = '2019-04-04 01:33:31',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f8b69a7b53',
			language = 'en_us',
			lastlogin = '2019-04-04 01:33:31',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '426';
2019-04-04T01:33:31+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:33:31+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:33:39+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:33:43+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T01:34:41+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-09 09:00:00' AND ri.start_date <= '2019-04-09 10:00:00') OR
					(ri.end_date >= '2019-04-09 09:00:00' AND ri.end_date <= '2019-04-09 10:00:00') OR
					(ri.start_date <= '2019-04-09 09:00:00' AND ri.end_date >= '2019-04-09 10:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-09 09:00:00' AND bi.start_date <= '2019-04-09 10:00:00')
				OR
				(bi.end_date >= '2019-04-09 09:00:00' AND bi.end_date <= '2019-04-09 10:00:00')
				OR
				(bi.start_date <= '2019-04-09 09:00:00' AND bi.end_date >= '2019-04-09 10:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 01:35:00', null, null, '0', false, 'none', '', '1', '1', '426', 'Powder mode');
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1046', '2', '1');
2019-04-04T01:35:00+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '1', '1046');
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'Powder specimen holder (small diameter)', '1046');
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '1046');
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '1046');
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-09 09:00:00', '2019-04-09 10:00:00', '5ca4fcd4ddeeb715441367', '1046', null);
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1045', '426', '1');
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T01:35:01+07:00 [6290] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:35:02+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T01:39:23+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-12 09:00:00' AND ri.start_date <= '2019-04-12 11:00:00') OR
					(ri.end_date >= '2019-04-12 09:00:00' AND ri.end_date <= '2019-04-12 11:00:00') OR
					(ri.start_date <= '2019-04-12 09:00:00' AND ri.end_date >= '2019-04-12 11:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-12 09:00:00' AND bi.start_date <= '2019-04-12 11:00:00')
				OR
				(bi.end_date >= '2019-04-12 09:00:00' AND bi.end_date <= '2019-04-12 11:00:00')
				OR
				(bi.start_date <= '2019-04-12 09:00:00' AND bi.end_date >= '2019-04-12 11:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 01:39:53', null, null, '0', false, 'none', '', '1', '1', '426', 'Powder mode');
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1047', '2', '1');
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '3', '1047');
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'Powder specimen holder (small diameter)', '1047');
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '1047');
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '1047');
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-12 09:00:00', '2019-04-12 11:00:00', '5ca4fdf9a7120658467089', '1047', null);
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1046', '426', '1');
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '426';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '426';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '426' AND (null is null OR r.role_level IN (null) );
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '426';
2019-04-04T01:39:53+07:00 [23803] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '426';
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '426' AND r.resource_id = urp.resource_id;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '426' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '426');
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T01:39:55+07:00 [10313] DEBUG sql - [User=Ploychanok Iadrat (ploychanok.i_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chokchai.k_s17@vistec.ac.th' OR email = 'chokchai.k_s17@vistec.ac.th') AND status_id = 1;
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chokchai.k_s17@vistec.ac.th' OR email = 'chokchai.k_s17@vistec.ac.th');
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '81084f00c051283756de36e1b2f8b41a36f366cb',
			salt = '06626705',
			fname = 'Chokchai',
			lname = 'Kaiyasuan',
			email = 'chokchai.k_s17@vistec.ac.th',
			username = 'KAKCK',
			homepageId = '1',
			last_modified = '2019-04-04 07:34:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b557d74b85',
			language = 'en_us',
			lastlogin = '2019-04-04 07:34:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '450';
2019-04-04T07:34:06+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T07:34:06+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 07:34:06' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 07:34:06' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '450' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450');
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '450';
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T07:34:07+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '450';
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '81084f00c051283756de36e1b2f8b41a36f366cb',
			salt = '06626705',
			fname = 'Chokchai',
			lname = 'Kaiyasuan',
			email = 'chokchai.k_s17@vistec.ac.th',
			username = 'KAKCK',
			homepageId = '1',
			last_modified = '2019-04-04 07:34:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b557d74b85',
			language = 'en_us',
			lastlogin = '2019-04-04 07:34:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '450';
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('450' = -1 OR ru.user_id = '450') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T07:34:07+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '450' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450');
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '450';
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T07:34:11+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '450';
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '81084f00c051283756de36e1b2f8b41a36f366cb',
			salt = '06626705',
			fname = 'Chokchai',
			lname = 'Kaiyasuan',
			email = 'chokchai.k_s17@vistec.ac.th',
			username = 'KAKCK',
			homepageId = '1',
			last_modified = '2019-04-04 07:34:12',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b557d74b85',
			language = 'en_us',
			lastlogin = '2019-04-04 07:34:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '450';
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('450' = -1 OR ru.user_id = '450') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T07:34:12+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'ratchawan' OR email = 'ratchawan') AND status_id = 1;
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'ratchawan' OR email = 'ratchawan');
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1fc28320546e2e6c4f0dfdf167f2696ca629b10',
			salt = '1675e87d',
			fname = 'Admin',
			lname = 'A.',
			email = 'ratchawan.j@vistec.ac.th',
			username = 'Ratchawan',
			homepageId = '1',
			last_modified = '2019-04-04 08:11:18',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92088663c53',
			language = 'en_us',
			lastlogin = '2019-04-04 08:11:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '547';
2019-04-04T08:11:18+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 08:11:18' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 08:11:18' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:11:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1fc28320546e2e6c4f0dfdf167f2696ca629b10',
			salt = '1675e87d',
			fname = 'Admin',
			lname = 'A.',
			email = 'ratchawan.j@vistec.ac.th',
			username = 'Ratchawan',
			homepageId = '1',
			last_modified = '2019-04-04 08:11:19',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92088663c53',
			language = 'en_us',
			lastlogin = '2019-04-04 08:11:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '547';
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('547' = -1 OR ru.user_id = '547') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T08:11:19+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T08:26:22+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:26:28+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:26:29+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T08:26:29+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T08:26:29+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chokchai.k_s17@vistec.ac.th' OR email = 'chokchai.k_s17@vistec.ac.th') AND status_id = 1;
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chokchai.k_s17@vistec.ac.th' OR email = 'chokchai.k_s17@vistec.ac.th');
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '81084f00c051283756de36e1b2f8b41a36f366cb',
			salt = '06626705',
			fname = 'Chokchai',
			lname = 'Kaiyasuan',
			email = 'chokchai.k_s17@vistec.ac.th',
			username = 'KAKCK',
			homepageId = '1',
			last_modified = '2019-04-04 08:29:41',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b557d74b85',
			language = 'en_us',
			lastlogin = '2019-04-04 08:29:41',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '450';
2019-04-04T08:29:41+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '450' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450');
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '450';
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:41+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '450';
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '81084f00c051283756de36e1b2f8b41a36f366cb',
			salt = '06626705',
			fname = 'Chokchai',
			lname = 'Kaiyasuan',
			email = 'chokchai.k_s17@vistec.ac.th',
			username = 'KAKCK',
			homepageId = '1',
			last_modified = '2019-04-04 08:29:42',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b557d74b85',
			language = 'en_us',
			lastlogin = '2019-04-04 08:29:41',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '450';
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('450' = -1 OR ru.user_id = '450') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T08:29:42+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '450' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450');
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T08:29:45+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '450' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450');
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-04-04T08:29:49+07:00 [23803] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '450';
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '450';
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '450' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '450';
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '450';
2019-04-04T08:29:53+07:00 [10313] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '450';
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '450' AND r.resource_id = urp.resource_id;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '450' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '450');
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-04-04T08:30:47+07:00 [6290] DEBUG sql - [User=Chokchai Kaiyasuan (chokchai.k_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vipthach' OR email = 'vipthach') AND status_id = 1;
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vipthach' OR email = 'vipthach');
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '453';
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '453' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '453';
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '453';
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e2cadcbcb5f12d8cce9b8dd5d1b90ea24b5b908f',
			salt = '26940222',
			fname = 'Thanyarat',
			lname = 'Chawanpunyawat',
			email = '1530315@vistec.ac.th',
			username = 'vipthach',
			homepageId = '1',
			last_modified = '2019-04-04 08:35:40',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8a02a907c0e',
			language = 'en_us',
			lastlogin = '2019-04-04 08:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '453';
2019-04-04T08:35:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 08:35:41' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 08:35:41' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '453' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453');
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '453';
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '453';
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '453' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '453';
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '453';
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:35:41+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '453';
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '453';
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '453' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '453';
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '453';
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e2cadcbcb5f12d8cce9b8dd5d1b90ea24b5b908f',
			salt = '26940222',
			fname = 'Thanyarat',
			lname = 'Chawanpunyawat',
			email = '1530315@vistec.ac.th',
			username = 'vipthach',
			homepageId = '1',
			last_modified = '2019-04-04 08:35:43',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8a02a907c0e',
			language = 'en_us',
			lastlogin = '2019-04-04 08:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '453';
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('453' = -1 OR ru.user_id = '453') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T08:35:43+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5c9f6cf6999a3405637476' AND
			rs.status_id <> 2;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '957'
		ORDER BY resource_level_id, r.name;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '956';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '957';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '957';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '957';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '957';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '956';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '453';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '453';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '453' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '453';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '453';
2019-04-04T08:35:49+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '453';
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 08:36:01' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 08:36:01' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '453' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453');
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '453';
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '453';
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '453' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '453';
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '453';
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:01+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '453';
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '453';
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '453' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '453';
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '453';
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e2cadcbcb5f12d8cce9b8dd5d1b90ea24b5b908f',
			salt = '26940222',
			fname = 'Thanyarat',
			lname = 'Chawanpunyawat',
			email = '1530315@vistec.ac.th',
			username = 'vipthach',
			homepageId = '1',
			last_modified = '2019-04-04 08:36:01',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8a02a907c0e',
			language = 'en_us',
			lastlogin = '2019-04-04 08:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '453';
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('453' = -1 OR ru.user_id = '453') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T08:36:01+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5ca317866e1b2409988204' AND
			rs.status_id <> 2;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '1015'
		ORDER BY resource_level_id, r.name;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '1014';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '1015';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '1015';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '1015';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '1015';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '1014';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '453';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '453';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '453' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '453';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '453';
2019-04-04T08:36:17+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '453';
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '453' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453');
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T08:36:24+07:00 [10313] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '453' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453');
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T08:36:32+07:00 [6290] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '453' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453');
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T08:36:44+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T08:51:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 08:53:38' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 08:53:38' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:53:38+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1fc28320546e2e6c4f0dfdf167f2696ca629b10',
			salt = '1675e87d',
			fname = 'Admin',
			lname = 'A.',
			email = 'ratchawan.j@vistec.ac.th',
			username = 'Ratchawan',
			homepageId = '1',
			last_modified = '2019-04-04 08:53:39',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92088663c53',
			language = 'en_us',
			lastlogin = '2019-04-04 08:11:18',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '547';
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('547' = -1 OR ru.user_id = '547') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T08:53:39+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'picporpo' OR email = 'picporpo') AND status_id = 1;
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'picporpo' OR email = 'picporpo');
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '501';
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '501' AND (null is null OR r.role_level IN (null) );
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '501';
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '501';
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ca4ed99755b069a685081f2c104a008214f3acee',
			salt = '4ae911ba',
			fname = 'Pornkanok',
			lname = 'Pongpamorn',
			email = 'pornkanok.p@vistec.ac.th',
			username = 'picporpo',
			homepageId = '1',
			last_modified = '2019-04-04 09:50:43',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c98a613a8f91',
			language = 'en_us',
			lastlogin = '2019-04-04 09:50:43',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '501';
2019-04-04T09:50:43+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '501' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501');
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T09:50:43+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '501';
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '501';
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '501' AND (null is null OR r.role_level IN (null) );
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '501';
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '501';
2019-04-04T09:50:54+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '501';
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '501' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501');
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T09:51:05+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'jarinya' OR email = 'jarinya') AND status_id = 1;
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'jarinya' OR email = 'jarinya');
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-04-04 10:00:27',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-04-04 10:00:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-04-04T10:00:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 10:00:27' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 10:00:27' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:00:27+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-04-04 10:00:28',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-04-04 10:00:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('544' = -1 OR ru.user_id = '544') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T10:00:28+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '501';
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '501';
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '501' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '501';
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '501';
2019-04-04T10:12:53+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '501';
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '501' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501');
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T10:13:10+07:00 [23803] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '501' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501');
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T10:13:13+07:00 [10313] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '501';
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '501';
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '501' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '501';
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '501';
2019-04-04T10:13:15+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '501';
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '501' AND r.resource_id = urp.resource_id;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '501' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '501');
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T10:13:21+07:00 [6290] DEBUG sql - [User=Pornkanok Pongpamorn (pornkanok.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khpweepa' OR email = 'khpweepa') AND status_id = 1;
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'khpweepa' OR email = 'khpweepa');
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b5be60a4aab00aec38630eaa8af09c7c193d4cd3',
			salt = '3c312ec5',
			fname = 'Weerapha',
			lname = 'Panatdasirisuk',
			email = 'gluay88weerapha@gmail.com',
			username = 'khpweepa',
			homepageId = '1',
			last_modified = '2019-04-04 10:39:40',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b4ed41bc9',
			language = 'en_us',
			lastlogin = '2019-04-04 10:39:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '438';
2019-04-04T10:39:40+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T10:39:40+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '438';
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-04-04T10:40:22+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '438';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '7';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '7';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '7';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 11:00:00' AND ri.start_date <= '2019-04-04 21:00:00') OR
					(ri.end_date >= '2019-04-04 11:00:00' AND ri.end_date <= '2019-04-04 21:00:00') OR
					(ri.start_date <= '2019-04-04 11:00:00' AND ri.end_date >= '2019-04-04 21:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('7'))
			ORDER BY ri.start_date ASC;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-04 11:00:00' AND bi.start_date <= '2019-04-04 21:00:00')
				OR
				(bi.end_date >= '2019-04-04 11:00:00' AND bi.end_date <= '2019-04-04 21:00:00')
				OR
				(bi.start_date <= '2019-04-04 11:00:00' AND bi.end_date >= '2019-04-04 21:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '438';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 10:40:30' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 10:40:30' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 10:40:30' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('438' = -1 OR ru.user_id = '438') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 10:40:30', null, null, '0', false, 'none', '', '1', '1', '438', null);
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1051', '7', '1');
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-04 11:00:00', '2019-04-04 21:00:00', '5ca57cae4f603167148268', '1051', null);
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1050', '438', '1');
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '438';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-04-04T10:40:30+07:00 [10313] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T10:40:31+07:00 [6290] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vipthach' OR email = 'vipthach') AND status_id = 1;
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vipthach' OR email = 'vipthach');
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '453';
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '453' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '453';
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '453';
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e2cadcbcb5f12d8cce9b8dd5d1b90ea24b5b908f',
			salt = '26940222',
			fname = 'Thanyarat',
			lname = 'Chawanpunyawat',
			email = '1530315@vistec.ac.th',
			username = 'vipthach',
			homepageId = '1',
			last_modified = '2019-04-04 11:05:25',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8a02a907c0e',
			language = 'en_us',
			lastlogin = '2019-04-04 11:05:25',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '453';
2019-04-04T11:05:25+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '453' AND r.resource_id = urp.resource_id;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '453' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '453');
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T11:05:25+07:00 [23803] DEBUG sql - [User=Thanyarat Chawanpunyawat (1530315@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'silvanodel.g@vistec.ac.th' OR email = 'silvanodel.g@vistec.ac.th') AND status_id = 1;
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'silvanodel.g@vistec.ac.th' OR email = 'silvanodel.g@vistec.ac.th');
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea247d3982cb38209c6f8c31771094c5c7c9c3f3',
			salt = '2c696e51',
			fname = 'Silvano',
			lname = 'DelGobbo',
			email = 'silvanodel.g@vistec.ac.th',
			username = 'silvano.delgobbo',
			homepageId = '1',
			last_modified = '2019-04-04 11:35:39',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9093d470545',
			language = 'en_us',
			lastlogin = '2019-04-04 11:35:39',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '393';
2019-04-04T11:35:39+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 11:35:39' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 11:35:39' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:35:39+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:35:41+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:35:41+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:35:41+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:35:41+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:35:41+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:35:41+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:35:41+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea247d3982cb38209c6f8c31771094c5c7c9c3f3',
			salt = '2c696e51',
			fname = 'Silvano',
			lname = 'DelGobbo',
			email = 'silvanodel.g@vistec.ac.th',
			username = 'silvano.delgobbo',
			homepageId = '1',
			last_modified = '2019-04-04 11:35:41',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9093d470545',
			language = 'en_us',
			lastlogin = '2019-04-04 11:35:39',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '393';
2019-04-04T11:35:41+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('393' = -1 OR ru.user_id = '393') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T11:35:42+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:36:05+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:36:16+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'sabpanpo' OR email = 'sabpanpo') AND status_id = 1;
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'sabpanpo' OR email = 'sabpanpo');
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-04-04 11:39:02',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-04-04 11:39:02',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-04-04T11:39:02+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 11:39:02' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 11:39:02' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:02+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-04-04 11:39:03',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-04-04 11:39:02',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T11:39:03+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 11:39:23' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 11:39:23' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:23+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-04-04 11:39:24',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-04-04 11:39:02',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T11:39:24+07:00 [23803] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '395' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '395');
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:27+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1ffd79bf6f909c4d9437d55436e69b0649e71bb',
			salt = '66c41fbf',
			fname = 'Panyapat',
			lname = 'Ponchai',
			email = '1630407@vistec.ac.th',
			username = 'sabpanpo',
			homepageId = '1',
			last_modified = '2019-04-04 11:39:28',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b4a50cc1dc',
			language = 'en_us',
			lastlogin = '2019-04-04 11:39:02',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '395';
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('395' = -1 OR ru.user_id = '395') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T11:39:28+07:00 [6290] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5c9c5bb767320767594295' AND
			rs.status_id <> 2;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '918'
		ORDER BY resource_level_id, r.name;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '917';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '918';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '918';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '918';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '918';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '917';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '395';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '395' AND r.resource_id = urp.resource_id;
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '395' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '395';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '395';
2019-04-04T11:39:30+07:00 [10313] DEBUG sql - [User=Panyapat Ponchai (1630407@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:41:52+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:41:53+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:41:53+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:42:03+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:42:04+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:42:04+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:42:04+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:42:04+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:42:26+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:43:02+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:43:08+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:43:28+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 12:00:00' AND ri.start_date <= '2019-04-08 19:00:00') OR
					(ri.end_date >= '2019-04-08 12:00:00' AND ri.end_date <= '2019-04-08 19:00:00') OR
					(ri.start_date <= '2019-04-08 12:00:00' AND ri.end_date >= '2019-04-08 19:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 12:00:00' AND bi.start_date <= '2019-04-08 19:00:00')
				OR
				(bi.end_date >= '2019-04-08 12:00:00' AND bi.end_date <= '2019-04-08 19:00:00')
				OR
				(bi.start_date <= '2019-04-08 12:00:00' AND bi.end_date >= '2019-04-08 19:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 11:44:16', null, null, '0', false, 'none', '', '1', '1', '393', 'Powder mode');
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1052', '2', '1');
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '5', '1052');
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'Powder specimen holder (small diameter)', '1052');
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '1052');
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '1052');
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-08 12:00:00', '2019-04-08 19:00:00', '5ca58ba07a732961722634', '1052', null);
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1051', '393', '1');
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:44:16+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:44:18+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:44:19+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:44:19+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T11:44:29+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:44:36+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:44:44+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-15 00:00:00' AND ri.start_date <= '2019-04-22 00:00:00') OR
					(ri.end_date >= '2019-04-15 00:00:00' AND ri.end_date <= '2019-04-22 00:00:00') OR
					(ri.start_date <= '2019-04-15 00:00:00' AND ri.end_date >= '2019-04-22 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-15 00:00:00' AND bi.start_date <= '2019-04-22 00:00:00')
				OR
				(bi.end_date >= '2019-04-15 00:00:00' AND bi.end_date <= '2019-04-22 00:00:00')
				OR
				(bi.start_date <= '2019-04-15 00:00:00' AND bi.end_date >= '2019-04-22 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:45:08+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:45:18+07:00 [6290] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:45:24+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:45:24+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:45:30+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:45:37+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '25';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '25';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '25';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-11 13:00:00' AND ri.start_date <= '2019-04-11 19:00:00') OR
					(ri.end_date >= '2019-04-11 13:00:00' AND ri.end_date <= '2019-04-11 19:00:00') OR
					(ri.start_date <= '2019-04-11 13:00:00' AND ri.end_date >= '2019-04-11 19:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-11 13:00:00' AND bi.start_date <= '2019-04-11 19:00:00')
				OR
				(bi.end_date >= '2019-04-11 13:00:00' AND bi.end_date <= '2019-04-11 19:00:00')
				OR
				(bi.start_date <= '2019-04-11 13:00:00' AND bi.end_date >= '2019-04-11 19:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '16';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 11:46:23' AND ri.start_date <= '2019-04-12 00:00:00') OR
					(ri.end_date >= '2019-04-04 11:46:23' AND ri.end_date <= '2019-04-12 00:00:00') OR
					(ri.start_date <= '2019-04-04 11:46:23' AND ri.end_date >= '2019-04-12 00:00:00')) AND
					('393' = -1 OR ru.user_id = '393') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 11:46:23' AND ri.start_date <= '2019-04-12 00:00:00') OR
					(ri.end_date >= '2019-04-04 11:46:23' AND ri.end_date <= '2019-04-12 00:00:00') OR
					(ri.start_date <= '2019-04-04 11:46:23' AND ri.end_date >= '2019-04-12 00:00:00')) AND
					('393' = -1 OR ru.user_id = '393') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 11:46:23', null, null, '0', false, 'none', '', '1', '1', '393', null);
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1053', '25', '1');
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('26', '1', 'ZnO quantum dots', '1053');
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('7', '1', 'EDS', '1053');
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-11 13:00:00', '2019-04-11 19:00:00', '5ca58c1fafcf4515664627', '1053', null);
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1052', '393', '1');
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '393';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '393';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '393' AND (null is null OR r.role_level IN (null) );
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '393';
2019-04-04T11:46:23+07:00 [23803] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '393';
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '393' AND r.resource_id = urp.resource_id;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '393' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '393');
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-04-04T11:46:25+07:00 [10313] DEBUG sql - [User=Silvano DelGobbo (silvanodel.g@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'meshaya' OR email = 'meshaya') AND status_id = 1;
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'meshaya' OR email = 'meshaya');
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ae6a3a38b3ae054d4ff3858161dba0809e442d66',
			salt = '5328a425',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-04-04 12:02:09',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-04-04 12:02:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-04-04T12:02:09+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 12:02:09' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 12:02:09' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:02:09+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ae6a3a38b3ae054d4ff3858161dba0809e442d66',
			salt = '5328a425',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-04-04 12:02:10',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-04-04 12:02:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('545' = -1 OR ru.user_id = '545') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T12:02:10+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 12:02:37' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 12:02:37' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:02:37+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ae6a3a38b3ae054d4ff3858161dba0809e442d66',
			salt = '5328a425',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-04-04 12:02:38',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-04-04 12:02:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('545' = -1 OR ru.user_id = '545') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T12:02:38+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:03:10+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ae6a3a38b3ae054d4ff3858161dba0809e442d66',
			salt = '5328a425',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-04-04 12:03:11',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-04-04 12:02:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T12:03:11+07:00 [23803] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:03:15+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '7';
2019-04-04T12:03:15+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '7';
2019-04-04T12:03:15+07:00 [6290] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '7';
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ae6a3a38b3ae054d4ff3858161dba0809e442d66',
			salt = '5328a425',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-04-04 12:03:15',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-04-04 12:02:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('7'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:03:15+07:00 [10313] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwkacsa' OR email = 'chwkacsa') AND status_id = 1;
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwkacsa' OR email = 'chwkacsa');
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f8acb7c4455b9f44b95443bcf770ac2c56442524',
			salt = '7ad45c18',
			fname = 'Kachaporn',
			lname = 'Saenluang',
			email = 'kachaporn.s_s16@vistec.ac.th',
			username = 'chwkacsa',
			homepageId = '1',
			last_modified = '2019-04-04 12:05:47',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89180bcbd94',
			language = 'en_us',
			lastlogin = '2019-04-04 12:05:47',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '424';
2019-04-04T12:05:47+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T12:05:47+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T12:05:53+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:06:18+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-05 13:00:00' AND ri.start_date <= '2019-04-05 15:00:00') OR
					(ri.end_date >= '2019-04-05 13:00:00' AND ri.end_date <= '2019-04-05 15:00:00') OR
					(ri.start_date <= '2019-04-05 13:00:00' AND ri.end_date >= '2019-04-05 15:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-05 13:00:00' AND bi.start_date <= '2019-04-05 15:00:00')
				OR
				(bi.end_date >= '2019-04-05 13:00:00' AND bi.end_date <= '2019-04-05 15:00:00')
				OR
				(bi.start_date <= '2019-04-05 13:00:00' AND bi.end_date >= '2019-04-05 15:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 12:06:32' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 12:06:32' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 12:06:32' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('424' = -1 OR ru.user_id = '424') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 12:06:32', null, null, '0', false, 'none', '', '1', '1', '424', null);
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1054', '19', '1');
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-05 13:00:00', '2019-04-05 15:00:00', '5ca590d835a67025277766', '1054', null);
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1053', '424', '1');
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:06:32+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T12:06:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T12:06:43+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T12:06:56+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:07:14+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '21';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '21';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '21';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-05 14:00:00' AND ri.start_date <= '2019-04-05 15:00:00') OR
					(ri.end_date >= '2019-04-05 14:00:00' AND ri.end_date <= '2019-04-05 15:00:00') OR
					(ri.start_date <= '2019-04-05 14:00:00' AND ri.end_date >= '2019-04-05 15:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('21'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-05 14:00:00' AND bi.start_date <= '2019-04-05 15:00:00')
				OR
				(bi.end_date >= '2019-04-05 14:00:00' AND bi.end_date <= '2019-04-05 15:00:00')
				OR
				(bi.start_date <= '2019-04-05 14:00:00' AND bi.end_date >= '2019-04-05 15:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 12:07:31' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 12:07:31' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 12:07:31' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('424' = -1 OR ru.user_id = '424') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 12:07:31', null, null, '0', false, 'none', '', '1', '1', '424', null);
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1055', '21', '1');
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('33', '1', 'Powders', '1055');
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('32', '1', '', '1055');
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-05 14:00:00', '2019-04-05 15:00:00', '5ca59113c3d4a411578768', '1055', null);
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1054', '424', '1');
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:07:31+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:07:32+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T12:07:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T12:07:33+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 12:07:41' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 12:07:41' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:07:41+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f8acb7c4455b9f44b95443bcf770ac2c56442524',
			salt = '7ad45c18',
			fname = 'Kachaporn',
			lname = 'Saenluang',
			email = 'kachaporn.s_s16@vistec.ac.th',
			username = 'chwkacsa',
			homepageId = '1',
			last_modified = '2019-04-04 12:07:41',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89180bcbd94',
			language = 'en_us',
			lastlogin = '2019-04-04 12:05:47',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '424';
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('424' = -1 OR ru.user_id = '424') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T12:07:41+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwkacsa' OR email = 'chwkacsa') AND status_id = 1;
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwkacsa' OR email = 'chwkacsa');
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f8acb7c4455b9f44b95443bcf770ac2c56442524',
			salt = '7ad45c18',
			fname = 'Kachaporn',
			lname = 'Saenluang',
			email = 'kachaporn.s_s16@vistec.ac.th',
			username = 'chwkacsa',
			homepageId = '1',
			last_modified = '2019-04-04 12:41:56',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89180bcbd94',
			language = 'en_us',
			lastlogin = '2019-04-04 12:41:56',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '424';
2019-04-04T12:41:56+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5ca590d835a67025277766' AND
			rs.status_id <> 2;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '1054'
		ORDER BY resource_level_id, r.name;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '1053';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '1054';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '1054';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '1054';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '1054';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '1053';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '424';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '424' AND (null is null OR r.role_level IN (null) );
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '424';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '424';
2019-04-04T12:41:56+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:42:01+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:42:02+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:42:02+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T12:42:02+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T12:42:02+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T12:42:09+07:00 [10313] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T12:42:27+07:00 [23803] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '424' AND r.resource_id = urp.resource_id;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '424' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '424');
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-15 00:00:00' AND ri.start_date <= '2019-04-22 00:00:00') OR
					(ri.end_date >= '2019-04-15 00:00:00' AND ri.end_date <= '2019-04-22 00:00:00') OR
					(ri.start_date <= '2019-04-15 00:00:00' AND ri.end_date >= '2019-04-22 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-15 00:00:00' AND bi.start_date <= '2019-04-22 00:00:00')
				OR
				(bi.end_date >= '2019-04-15 00:00:00' AND bi.end_date <= '2019-04-22 00:00:00')
				OR
				(bi.start_date <= '2019-04-15 00:00:00' AND bi.end_date >= '2019-04-22 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T12:42:36+07:00 [6290] DEBUG sql - [User=Kachaporn Saenluang (kachaporn.s_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosnutph' OR email = 'mosnutph') AND status_id = 1;
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosnutph' OR email = 'mosnutph');
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea53a08b892e914b701831f5408698e473f37980',
			salt = '1bf5cd21',
			fname = 'Nutthaphon',
			lname = 'Phattharasupakun',
			email = 's15_nutthaphon.p@vistec.ac.th',
			username = 'mosnutph',
			homepageId = '1',
			last_modified = '2019-04-04 13:03:17',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efe9966332',
			language = 'en_us',
			lastlogin = '2019-04-04 13:03:17',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '512';
2019-04-04T13:03:17+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 13:03:17' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 13:03:17' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:03:17+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T13:03:18+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T13:03:18+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:03:18+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:18+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea53a08b892e914b701831f5408698e473f37980',
			salt = '1bf5cd21',
			fname = 'Nutthaphon',
			lname = 'Phattharasupakun',
			email = 's15_nutthaphon.p@vistec.ac.th',
			username = 'mosnutph',
			homepageId = '1',
			last_modified = '2019-04-04 13:03:21',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efe9966332',
			language = 'en_us',
			lastlogin = '2019-04-04 13:03:17',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '512';
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('512' = -1 OR ru.user_id = '512') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T13:03:21+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:03:24+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:03:32+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:04:07+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:04:07+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:04:07+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:04:07+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:04:07+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:04:07+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:04:07+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:04:07+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:04:08+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T13:04:08+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:04:08+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T13:04:08+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:04:08+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:04:08+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:04:08+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:04:08+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:04:12+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:13:27+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'stpayu' OR email = 'stpayu') AND status_id = 1;
2019-04-04T13:13:27+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'stpayu' OR email = 'stpayu');
2019-04-04T13:13:27+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-04-04T13:13:27+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-04-04T13:13:28+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:13:28+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-04-04T13:13:28+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-04-04T13:13:28+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '657901d65514abdde9e84958b7c3da491d26a9e6',
			salt = '49e7173e',
			fname = 'Salatan',
			lname = 'Duangdangchote',
			email = 'Salatan.d_s17@vistec.ac.th',
			username = 'stpayu',
			homepageId = '1',
			last_modified = '2019-04-04 13:13:28',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91ea0c87c0a',
			language = 'en_us',
			lastlogin = '2019-04-04 13:13:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '524';
2019-04-04T13:13:28+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 13:13:28' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 13:13:28' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:28+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '657901d65514abdde9e84958b7c3da491d26a9e6',
			salt = '49e7173e',
			fname = 'Salatan',
			lname = 'Duangdangchote',
			email = 'Salatan.d_s17@vistec.ac.th',
			username = 'stpayu',
			homepageId = '1',
			last_modified = '2019-04-04 13:13:28',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91ea0c87c0a',
			language = 'en_us',
			lastlogin = '2019-04-04 13:13:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '524';
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('524' = -1 OR ru.user_id = '524') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T13:13:28+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:13:31+07:00 [23803] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:13:34+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-04-04T13:14:48+07:00 [10313] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:14:54+07:00 [6290] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'kaksarso' OR email = 'kaksarso') AND status_id = 1;
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'kaksarso' OR email = 'kaksarso');
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '491';
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '491' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '491';
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '491';
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f611f79c0b556e4bbb74ad9743a1f963d0d3a5bc',
			salt = '5465dca3',
			fname = 'Saranyoo',
			lname = 'Sornkumnerd',
			email = 'saranyoo.s@hotmail.com',
			username = 'kaksarso',
			homepageId = '1',
			last_modified = '2019-04-04 13:40:16',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efd05e0b15',
			language = 'en_us',
			lastlogin = '2019-04-04 13:40:16',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '491';
2019-04-04T13:40:16+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 13:40:17' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 13:40:17' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '491';
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '491';
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '491' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '491';
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '491';
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:17+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '491';
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '491';
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '491' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '491';
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '491';
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f611f79c0b556e4bbb74ad9743a1f963d0d3a5bc',
			salt = '5465dca3',
			fname = 'Saranyoo',
			lname = 'Sornkumnerd',
			email = 'saranyoo.s@hotmail.com',
			username = 'kaksarso',
			homepageId = '1',
			last_modified = '2019-04-04 13:40:20',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efd05e0b15',
			language = 'en_us',
			lastlogin = '2019-04-04 13:40:16',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '491';
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('491' = -1 OR ru.user_id = '491') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T13:40:20+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'kakvetso' OR email = 'kakvetso') AND status_id = 1;
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'kakvetso' OR email = 'kakvetso');
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '611e12e1ae07fee19e6a5e611cb87fb36e7b9abc',
			salt = '7b99b771',
			fname = 'Vetiga',
			lname = 'Somjit',
			email = '1730105@vistec.ac.th',
			username = 'kakvetso',
			homepageId = '1',
			last_modified = '2019-04-04 13:40:27',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b9ec9d04a6',
			language = 'en_us',
			lastlogin = '2019-04-04 13:40:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '489';
2019-04-04T13:40:27+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 13:40:27' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 13:40:27' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:27+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '611e12e1ae07fee19e6a5e611cb87fb36e7b9abc',
			salt = '7b99b771',
			fname = 'Vetiga',
			lname = 'Somjit',
			email = '1730105@vistec.ac.th',
			username = 'kakvetso',
			homepageId = '1',
			last_modified = '2019-04-04 13:40:28',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b9ec9d04a6',
			language = 'en_us',
			lastlogin = '2019-04-04 13:40:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '489';
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('489' = -1 OR ru.user_id = '489') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T13:40:28+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:42+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '611e12e1ae07fee19e6a5e611cb87fb36e7b9abc',
			salt = '7b99b771',
			fname = 'Vetiga',
			lname = 'Somjit',
			email = '1730105@vistec.ac.th',
			username = 'kakvetso',
			homepageId = '1',
			last_modified = '2019-04-04 13:40:43',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b9ec9d04a6',
			language = 'en_us',
			lastlogin = '2019-04-04 13:40:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '489';
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T13:40:43+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:40:43+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:40:51+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '611e12e1ae07fee19e6a5e611cb87fb36e7b9abc',
			salt = '7b99b771',
			fname = 'Vetiga',
			lname = 'Somjit',
			email = '1730105@vistec.ac.th',
			username = 'kakvetso',
			homepageId = '1',
			last_modified = '2019-04-04 13:41:20',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b9ec9d04a6',
			language = 'en_us',
			lastlogin = '2019-04-04 13:40:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '489';
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:41:20+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:41:20+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-04-04T13:41:20+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-04-04T13:41:20+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5ca590d835a67025277766' AND
			rs.status_id <> 2;
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '1054'
		ORDER BY resource_level_id, r.name;
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '1053';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '1054';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '1054';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '1054';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '1054';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '1053';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:41:28+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '424';
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:41:36+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '491';
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '491';
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '491' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '491';
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '491';
2019-04-04T13:41:50+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '491';
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:42:01+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:42:17+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T13:42:33+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:42:51+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:43:00+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:43:15+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-05 15:00:00' AND ri.start_date <= '2019-04-05 17:00:00') OR
					(ri.end_date >= '2019-04-05 15:00:00' AND ri.end_date <= '2019-04-05 17:00:00') OR
					(ri.start_date <= '2019-04-05 15:00:00' AND ri.end_date >= '2019-04-05 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-05 15:00:00' AND bi.start_date <= '2019-04-05 17:00:00')
				OR
				(bi.end_date >= '2019-04-05 15:00:00' AND bi.end_date <= '2019-04-05 17:00:00')
				OR
				(bi.start_date <= '2019-04-05 15:00:00' AND bi.end_date >= '2019-04-05 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 13:43:28' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 13:43:28' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 13:43:28' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('489' = -1 OR ru.user_id = '489') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 13:43:28', null, null, '0', false, 'none', '', '1', '1', '489', null);
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1057', '19', '1');
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-05 15:00:00', '2019-04-05 17:00:00', '5ca5a7900644d640709430', '1057', null);
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1056', '489', '1');
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:43:28+07:00 [10313] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:43:29+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:43:34+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-05 17:00:00' AND ri.start_date <= '2019-04-05 18:00:00') OR
					(ri.end_date >= '2019-04-05 17:00:00' AND ri.end_date <= '2019-04-05 18:00:00') OR
					(ri.start_date <= '2019-04-05 17:00:00' AND ri.end_date >= '2019-04-05 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-05 17:00:00' AND bi.start_date <= '2019-04-05 18:00:00')
				OR
				(bi.end_date >= '2019-04-05 17:00:00' AND bi.end_date <= '2019-04-05 18:00:00')
				OR
				(bi.start_date <= '2019-04-05 17:00:00' AND bi.end_date >= '2019-04-05 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T13:43:37+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 13:43:37' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 13:43:37' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 13:43:37' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('489' = -1 OR ru.user_id = '489') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 13:43:38', null, null, '0', false, 'none', '', '1', '1', '489', null);
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1058', '19', '1');
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-05 17:00:00', '2019-04-05 18:00:00', '5ca5a799e61f9717806315', '1058', null);
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1057', '489', '1');
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '489';
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '489';
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '489' AND (null is null OR r.role_level IN (null) );
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '489';
2019-04-04T13:43:38+07:00 [23803] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '489';
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '489' AND r.resource_id = urp.resource_id;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '489' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '489');
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T13:43:39+07:00 [6290] DEBUG sql - [User=Vetiga Somjit (1730105@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpeepo' OR email = 'chwpeepo') AND status_id = 1;
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpeepo' OR email = 'chwpeepo');
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '416';
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '416' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '416';
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '416';
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '67ec2befbe398595115b87e0c364ca0e12f4e9f4',
			salt = '2820bc95',
			fname = 'Peerapol',
			lname = 'Pornsetmetakul',
			email = 'Peerapol.p_s18@vistec.ac.th',
			username = 'chwpeepo',
			homepageId = '2',
			last_modified = '2019-04-04 14:06:40',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9308f54ae33',
			language = 'en_us',
			lastlogin = '2019-04-04 14:06:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '416';
2019-04-04T14:06:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:06:40+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:06:41+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:06:41+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:06:41+07:00 [10313] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T14:06:47+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T14:06:56+07:00 [6290] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T14:07:02+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '416' AND r.resource_id = urp.resource_id;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '416' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '416');
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T14:07:19+07:00 [23803] DEBUG sql - [User=Peerapol Pornsetmetakul (Peerapol.p_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'ratchawan' OR email = 'ratchawan') AND status_id = 1;
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'ratchawan' OR email = 'ratchawan');
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1fc28320546e2e6c4f0dfdf167f2696ca629b10',
			salt = '1675e87d',
			fname = 'Admin',
			lname = 'A.',
			email = 'ratchawan.j@vistec.ac.th',
			username = 'Ratchawan',
			homepageId = '1',
			last_modified = '2019-04-04 14:24:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92088663c53',
			language = 'en_us',
			lastlogin = '2019-04-04 14:24:07',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '547';
2019-04-04T14:24:07+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 14:24:08' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 14:24:08' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:08+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1fc28320546e2e6c4f0dfdf167f2696ca629b10',
			salt = '1675e87d',
			fname = 'Admin',
			lname = 'A.',
			email = 'ratchawan.j@vistec.ac.th',
			username = 'Ratchawan',
			homepageId = '1',
			last_modified = '2019-04-04 14:24:09',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92088663c53',
			language = 'en_us',
			lastlogin = '2019-04-04 14:24:07',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '547';
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('547' = -1 OR ru.user_id = '547') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T14:24:09+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:24:12+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:24:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:24:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:24:18+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:24:26+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:24:38+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:24:39+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:24:39+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:24:39+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vippatfu' OR email = 'vippatfu') AND status_id = 1;
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vippatfu' OR email = 'vippatfu');
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '367d0a820b128187e1b1d7c05e32658b7251d8ef',
			salt = '0a70ace5',
			fname = 'Patteera',
			lname = 'Funchien',
			email = '1630304@vistec.ac.th',
			username = 'vippatfu',
			homepageId = '1',
			last_modified = '2019-04-04 14:26:48',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9301cb40537',
			language = 'en_us',
			lastlogin = '2019-04-04 14:26:48',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '451';
2019-04-04T14:26:48+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:26:49+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:26:59+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:27:18+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '11';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '11';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '11';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-05 09:00:00' AND ri.start_date <= '2019-04-05 20:00:00') OR
					(ri.end_date >= '2019-04-05 09:00:00' AND ri.end_date <= '2019-04-05 20:00:00') OR
					(ri.start_date <= '2019-04-05 09:00:00' AND ri.end_date >= '2019-04-05 20:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('11'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-05 09:00:00' AND bi.start_date <= '2019-04-05 20:00:00')
				OR
				(bi.end_date >= '2019-04-05 09:00:00' AND bi.end_date <= '2019-04-05 20:00:00')
				OR
				(bi.start_date <= '2019-04-05 09:00:00' AND bi.end_date >= '2019-04-05 20:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 14:27:47' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 14:27:47' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 14:27:47' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('451' = -1 OR ru.user_id = '451') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 14:27:47', null, null, '0', false, 'none', '', '1', '1', '451', null);
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1059', '11', '1');
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-05 09:00:00', '2019-04-05 20:00:00', '5ca5b1f363851111549020', '1059', null);
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1058', '451', '1');
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1058', '440', '2');
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '440';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '440';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '440' AND r.resource_id = urp.resource_id;
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '440' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '440';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '440';
2019-04-04T14:27:47+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:27:55+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:28:01+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T14:28:09+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T14:28:17+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:28:34+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '16';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '16';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '16';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 12:00:00' AND ri.start_date <= '2019-04-08 16:00:00') OR
					(ri.end_date >= '2019-04-08 12:00:00' AND ri.end_date <= '2019-04-08 16:00:00') OR
					(ri.start_date <= '2019-04-08 12:00:00' AND ri.end_date >= '2019-04-08 16:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 12:00:00' AND bi.start_date <= '2019-04-08 16:00:00')
				OR
				(bi.end_date >= '2019-04-08 12:00:00' AND bi.end_date <= '2019-04-08 16:00:00')
				OR
				(bi.start_date <= '2019-04-08 12:00:00' AND bi.end_date >= '2019-04-08 16:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '13';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 14:29:01' AND ri.start_date <= '2019-04-09 00:00:00') OR
					(ri.end_date >= '2019-04-04 14:29:01' AND ri.end_date <= '2019-04-09 00:00:00') OR
					(ri.start_date <= '2019-04-04 14:29:01' AND ri.end_date >= '2019-04-09 00:00:00')) AND
					('451' = -1 OR ru.user_id = '451') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 14:29:01', null, null, '0', false, 'none', '', '1', '1', '451', null);
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1060', '16', '1');
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('28', '1', 'All', '1060');
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('47', '1', '8', '1060');
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('48', '1', '', '1060');
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-08 12:00:00', '2019-04-08 16:00:00', '5ca5b23da39f1176506789', '1060', null);
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1059', '451', '1');
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:29:01+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'kaksarso' OR email = 'kaksarso') AND status_id = 1;
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'kaksarso' OR email = 'kaksarso');
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '491';
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '491' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '491';
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '491';
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f611f79c0b556e4bbb74ad9743a1f963d0d3a5bc',
			salt = '5465dca3',
			fname = 'Saranyoo',
			lname = 'Sornkumnerd',
			email = 'saranyoo.s@hotmail.com',
			username = 'kaksarso',
			homepageId = '1',
			last_modified = '2019-04-04 14:29:02',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efd05e0b15',
			language = 'en_us',
			lastlogin = '2019-04-04 14:29:02',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '491';
2019-04-04T14:29:02+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:02+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T14:29:04+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:10+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:11+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 14:29:15' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 14:29:15' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '491';
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '491';
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '491' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '491';
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '491';
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '491';
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '491';
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '491' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '491';
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '491';
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f611f79c0b556e4bbb74ad9743a1f963d0d3a5bc',
			salt = '5465dca3',
			fname = 'Saranyoo',
			lname = 'Sornkumnerd',
			email = 'saranyoo.s@hotmail.com',
			username = 'kaksarso',
			homepageId = '1',
			last_modified = '2019-04-04 14:29:17',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efd05e0b15',
			language = 'en_us',
			lastlogin = '2019-04-04 14:29:02',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '491';
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('491' = -1 OR ru.user_id = '491') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:17+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:21+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:26+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:31+07:00 [23803] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:29:39+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '29';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '29';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '29';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 15:00:00' AND ri.start_date <= '2019-04-08 18:00:00') OR
					(ri.end_date >= '2019-04-08 15:00:00' AND ri.end_date <= '2019-04-08 18:00:00') OR
					(ri.start_date <= '2019-04-08 15:00:00' AND ri.end_date >= '2019-04-08 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('29'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 15:00:00' AND bi.start_date <= '2019-04-08 18:00:00')
				OR
				(bi.end_date >= '2019-04-08 15:00:00' AND bi.end_date <= '2019-04-08 18:00:00')
				OR
				(bi.start_date <= '2019-04-08 15:00:00' AND bi.end_date >= '2019-04-08 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 14:29:45' AND ri.start_date <= '2019-04-09 00:00:00') OR
					(ri.end_date >= '2019-04-04 14:29:45' AND ri.end_date <= '2019-04-09 00:00:00') OR
					(ri.start_date <= '2019-04-04 14:29:45' AND ri.end_date >= '2019-04-09 00:00:00')) AND
					('451' = -1 OR ru.user_id = '451') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 14:29:45', null, null, '0', false, 'none', '', '1', '1', '451', null);
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1061', '29', '1');
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('41', '1', 'Film', '1061');
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('32', '1', '', '1061');
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-08 15:00:00', '2019-04-08 18:00:00', '5ca5b269c922a697049097', '1061', null);
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1060', '451', '1');
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-04-04T14:29:45+07:00 [6290] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:29:48+07:00 [10313] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T14:30:07+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:30:15+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:30:16+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:30:16+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:30:16+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:30:30+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '491';
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '491';
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '491' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '491';
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '491';
2019-04-04T14:30:37+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '491';
2019-04-04T14:30:41+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:30:41+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:30:41+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:41+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:41+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:30:41+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:41+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:41+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:42+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:30:42+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:30:42+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:30:42+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:30:42+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:30:42+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:30:42+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:30:42+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:30:45+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:30:51+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:30:54+07:00 [6290] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:31:01+07:00 [10313] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '491' AND r.resource_id = urp.resource_id;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '491' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '491');
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-04-04T14:31:11+07:00 [23803] DEBUG sql - [User=Saranyoo Sornkumnerd (saranyoo.s@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vdevatao' OR email = 'vdevatao') AND status_id = 1;
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vdevatao' OR email = 'vdevatao');
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '385';
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '385' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '385';
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '385';
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '965b0c2a548bb73afc1fc0d7cc8c32e2ee297e57',
			salt = '53292332',
			fname = 'Vatcharaporn',
			lname = 'Aomchad',
			email = 's15_vatcharaporn.a@vistec.ac.th',
			username = 'vdevatao',
			homepageId = '1',
			last_modified = '2019-04-04 14:37:05',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9331a8b75b6',
			language = 'en_us',
			lastlogin = '2019-04-04 14:37:05',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '385';
2019-04-04T14:37:05+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 14:37:05' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 14:37:05' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '385' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385');
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '385';
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '385';
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '385' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '385';
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '385';
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:05+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '385';
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '385';
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '385' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '385';
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '385';
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '965b0c2a548bb73afc1fc0d7cc8c32e2ee297e57',
			salt = '53292332',
			fname = 'Vatcharaporn',
			lname = 'Aomchad',
			email = 's15_vatcharaporn.a@vistec.ac.th',
			username = 'vdevatao',
			homepageId = '1',
			last_modified = '2019-04-04 14:37:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9331a8b75b6',
			language = 'en_us',
			lastlogin = '2019-04-04 14:37:05',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '385';
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('385' = -1 OR ru.user_id = '385') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T14:37:07+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '385' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385');
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T14:37:09+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '385' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385');
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:37:14+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '385';
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '385';
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '385' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '385';
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '385';
2019-04-04T14:37:59+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '385';
2019-04-04T14:38:22+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:38:22+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T14:38:22+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:38:22+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T14:38:24+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:38:24+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '28';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '28';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '28';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-07 21:00:00' AND ri.start_date <= '2019-04-08 09:00:00') OR
					(ri.end_date >= '2019-04-07 21:00:00' AND ri.end_date <= '2019-04-08 09:00:00') OR
					(ri.start_date <= '2019-04-07 21:00:00' AND ri.end_date >= '2019-04-08 09:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-07 21:00:00' AND bi.start_date <= '2019-04-08 09:00:00')
				OR
				(bi.end_date >= '2019-04-07 21:00:00' AND bi.end_date <= '2019-04-08 09:00:00')
				OR
				(bi.start_date <= '2019-04-07 21:00:00' AND bi.end_date >= '2019-04-08 09:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '385' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385');
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '385';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '385';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '385' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '385';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '385';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '22';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 14:39:36' AND ri.start_date <= '2019-04-09 00:00:00') OR
					(ri.end_date >= '2019-04-04 14:39:36' AND ri.end_date <= '2019-04-09 00:00:00') OR
					(ri.start_date <= '2019-04-04 14:39:36' AND ri.end_date >= '2019-04-09 00:00:00')) AND
					('385' = -1 OR ru.user_id = '385') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 14:39:36', null, null, '0', false, 'none', '', '1', '1', '385', null);
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1062', '28', '1');
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-07 21:00:00', '2019-04-08 09:00:00', '5ca5b4b8793f4151723667', '1062', null);
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1061', '385', '1');
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '385';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '385';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '385' AND (null is null OR r.role_level IN (null) );
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '385';
2019-04-04T14:39:36+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '385';
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '385' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385');
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:39:37+07:00 [23803] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '385' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385');
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:40:01+07:00 [6290] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '385' AND r.resource_id = urp.resource_id;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '385' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '385');
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T14:40:04+07:00 [10313] DEBUG sql - [User=Vatcharaporn Aomchad (s15_vatcharaporn.a@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosnutph' OR email = 'mosnutph') AND status_id = 1;
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosnutph' OR email = 'mosnutph');
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea53a08b892e914b701831f5408698e473f37980',
			salt = '1bf5cd21',
			fname = 'Nutthaphon',
			lname = 'Phattharasupakun',
			email = 's15_nutthaphon.p@vistec.ac.th',
			username = 'mosnutph',
			homepageId = '1',
			last_modified = '2019-04-04 15:02:04',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efe9966332',
			language = 'en_us',
			lastlogin = '2019-04-04 15:02:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '512';
2019-04-04T15:02:04+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 15:02:04' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 15:02:04' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:04+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea53a08b892e914b701831f5408698e473f37980',
			salt = '1bf5cd21',
			fname = 'Nutthaphon',
			lname = 'Phattharasupakun',
			email = 's15_nutthaphon.p@vistec.ac.th',
			username = 'mosnutph',
			homepageId = '1',
			last_modified = '2019-04-04 15:02:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efe9966332',
			language = 'en_us',
			lastlogin = '2019-04-04 15:02:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '512';
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('512' = -1 OR ru.user_id = '512') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:02:06+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:02:07+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:02:14+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T15:02:18+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 21:00:00' AND ri.start_date <= '2019-04-04 23:00:00') OR
					(ri.end_date >= '2019-04-04 21:00:00' AND ri.end_date <= '2019-04-04 23:00:00') OR
					(ri.start_date <= '2019-04-04 21:00:00' AND ri.end_date >= '2019-04-04 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-04 21:00:00' AND bi.start_date <= '2019-04-04 23:00:00')
				OR
				(bi.end_date >= '2019-04-04 21:00:00' AND bi.end_date <= '2019-04-04 23:00:00')
				OR
				(bi.start_date <= '2019-04-04 21:00:00' AND bi.end_date >= '2019-04-04 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 15:02:28' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 15:02:28' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 15:02:28' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('512' = -1 OR ru.user_id = '512') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 15:02:28', null, null, '0', false, 'none', '', '1', '1', '512', null);
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1063', '19', '1');
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-04 21:00:00', '2019-04-04 23:00:00', '5ca5ba147ade7196755270', '1063', null);
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1062', '512', '1');
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T15:02:28+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:02:30+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dacpapna' OR email = 'dacpapna') AND status_id = 1;
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dacpapna' OR email = 'dacpapna');
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-04-04 15:03:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-04-04 15:03:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-04-04T15:03:55+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 15:03:55' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 15:03:55' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:03:55+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-04-04 15:03:56',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-04-04 15:03:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('404' = -1 OR ru.user_id = '404') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:03:56+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:03+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-04-04 15:04:04',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-04-04 15:03:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:04:04+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-04-04 15:04:08',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-04-04 15:03:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('17'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:04:08+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:04:08+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '17';
2019-04-04T15:04:08+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '17';
2019-04-04T15:04:08+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '17';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5c9c7d2f95884564550566' AND
			rs.status_id <> 2;
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '924'
		ORDER BY resource_level_id, r.name;
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '923';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '924';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '924';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '924';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '924';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '923';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:04:10+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:04:16+07:00 [6290] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:04:20+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:04:26+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '17';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '17';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '17';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 17:00:00' AND ri.start_date <= '2019-04-04 18:00:00') OR
					(ri.end_date >= '2019-04-04 17:00:00' AND ri.end_date <= '2019-04-04 18:00:00') OR
					(ri.start_date <= '2019-04-04 17:00:00' AND ri.end_date >= '2019-04-04 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('17'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-04 17:00:00' AND bi.start_date <= '2019-04-04 18:00:00')
				OR
				(bi.end_date >= '2019-04-04 17:00:00' AND bi.end_date <= '2019-04-04 18:00:00')
				OR
				(bi.start_date <= '2019-04-04 17:00:00' AND bi.end_date >= '2019-04-04 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 15:06:11' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 15:06:11' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 15:06:11' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('404' = -1 OR ru.user_id = '404') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 15:06:11', null, null, '0', false, 'none', '', '1', '1', '404', null);
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1064', '17', '1');
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('43', '1', '1', '1064');
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('44', '1', 'powder', '1064');
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('42', '1', 'ATR', '1064');
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('45', '1', '', '1064');
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-04 17:00:00', '2019-04-04 18:00:00', '5ca5baf3b1d56741519836', '1064', null);
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1063', '404', '1');
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-04-04T15:06:11+07:00 [10313] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:06:13+07:00 [23803] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:52:15+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khpnatla' OR email = 'khpnatla') AND status_id = 1;
2019-04-04T15:52:33+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khpnatla' OR email = 'khpnatla') AND status_id = 1;
2019-04-04T15:53:30+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th') AND status_id = 1;
2019-04-04T15:53:47+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khpnatla' OR email = 'khpnatla') AND status_id = 1;
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'ratchawan' OR email = 'ratchawan') AND status_id = 1;
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'ratchawan' OR email = 'ratchawan');
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1fc28320546e2e6c4f0dfdf167f2696ca629b10',
			salt = '1675e87d',
			fname = 'Admin',
			lname = 'A.',
			email = 'ratchawan.j@vistec.ac.th',
			username = 'Ratchawan',
			homepageId = '1',
			last_modified = '2019-04-04 15:53:58',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92088663c53',
			language = 'en_us',
			lastlogin = '2019-04-04 15:53:58',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '547';
2019-04-04T15:53:58+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:53:58+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:53:59+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khpnatla' OR email = 'khpnatla') AND status_id = 1;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:54:03+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 15:54:12' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 15:54:12' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:12+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1fc28320546e2e6c4f0dfdf167f2696ca629b10',
			salt = '1675e87d',
			fname = 'Admin',
			lname = 'A.',
			email = 'ratchawan.j@vistec.ac.th',
			username = 'Ratchawan',
			homepageId = '1',
			last_modified = '2019-04-04 15:54:13',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92088663c53',
			language = 'en_us',
			lastlogin = '2019-04-04 15:53:58',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '547';
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('547' = -1 OR ru.user_id = '547') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:54:13+07:00 [6290] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:19+07:00 [10313] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '547';
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '547';
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '547' AND r.resource_id = urp.resource_id;
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '547' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '547';
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '547';
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'd1fc28320546e2e6c4f0dfdf167f2696ca629b10',
			salt = '1675e87d',
			fname = 'Admin',
			lname = 'A.',
			email = 'ratchawan.j@vistec.ac.th',
			username = 'Ratchawan',
			homepageId = '1',
			last_modified = '2019-04-04 15:54:20',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92088663c53',
			language = 'en_us',
			lastlogin = '2019-04-04 15:53:58',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '547';
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:54:20+07:00 [23803] DEBUG sql - [User=Admin A. (ratchawan.j@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:54:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id
		FROM users
		WHERE email = '1730306@vistec.ac.th';
2019-04-04T15:54:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:54:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:54:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:54:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:54:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:54:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:54:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '8e8db47842eb347c45585ea57ace677870ddd999',
			salt = '124473cc',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 15:54:23',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-03-13 19:45:11',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th') AND status_id = 1;
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th');
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '8e8db47842eb347c45585ea57ace677870ddd999',
			salt = '124473cc',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 15:55:38',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 15:55:38',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T15:55:38+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 15:55:39' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 15:55:39' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:55:39+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '8e8db47842eb347c45585ea57ace677870ddd999',
			salt = '124473cc',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 15:55:39',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 15:55:38',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:55:39+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:56:10+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:56:10+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:56:10+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:56:10+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:56:10+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:56:10+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:56:10+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 15:56:10',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 15:55:38',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM positions
		ORDER BY name;
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '2' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:56:16+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM custom_attribute_values WHERE entity_id IN ('431') AND attribute_category = '2';
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:56:25+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 15:56:25',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 15:55:38',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:56:25+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T15:56:28+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'jarinya' OR email = 'jarinya') AND status_id = 1;
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'jarinya' OR email = 'jarinya');
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-04-04 15:57:04',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-04-04 15:57:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-04-04T15:57:04+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 15:57:04' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 15:57:04' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:57:04+07:00 [23803] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-04-04 15:57:05',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-04-04 15:57:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('544' = -1 OR ru.user_id = '544') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:57:05+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:58:02+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:58:12+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-15 00:00:00' AND ri.start_date <= '2019-04-22 00:00:00') OR
					(ri.end_date >= '2019-04-15 00:00:00' AND ri.end_date <= '2019-04-22 00:00:00') OR
					(ri.start_date <= '2019-04-15 00:00:00' AND ri.end_date >= '2019-04-22 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-15 00:00:00' AND bi.start_date <= '2019-04-22 00:00:00')
				OR
				(bi.end_date >= '2019-04-15 00:00:00' AND bi.end_date <= '2019-04-22 00:00:00')
				OR
				(bi.start_date <= '2019-04-15 00:00:00' AND bi.end_date >= '2019-04-22 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:58:19+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T15:58:23+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:58:24+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:58:41+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:58:46+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:58:59+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-11 14:00:00' AND ri.start_date <= '2019-04-11 17:00:00') OR
					(ri.end_date >= '2019-04-11 14:00:00' AND ri.end_date <= '2019-04-11 17:00:00') OR
					(ri.start_date <= '2019-04-11 14:00:00' AND ri.end_date >= '2019-04-11 17:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-11 14:00:00' AND bi.start_date <= '2019-04-11 17:00:00')
				OR
				(bi.end_date >= '2019-04-11 14:00:00' AND bi.end_date <= '2019-04-11 17:00:00')
				OR
				(bi.start_date <= '2019-04-11 14:00:00' AND bi.end_date >= '2019-04-11 17:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 15:59:28' AND ri.start_date <= '2019-05-01 00:00:00') OR
					(ri.end_date >= '2019-04-04 15:59:28' AND ri.end_date <= '2019-05-01 00:00:00') OR
					(ri.start_date <= '2019-04-04 15:59:28' AND ri.end_date >= '2019-05-01 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 15:59:28', null, null, '0', false, 'none', '', '1', '1', '431', null);
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1065', '19', '1');
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-11 14:00:00', '2019-04-11 17:00:00', '5ca5c7705010e050006960', '1065', null);
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1064', '431', '1');
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T15:59:28+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T15:59:30+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:02:52+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:03:02+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:03:02',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 15:55:38',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:03:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5ca5c7705010e050006960' AND
			rs.status_id <> 2;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '1065'
		ORDER BY resource_level_id, r.name;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '1064';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '1065';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '1065';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '1065';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '1065';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '1064';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:03:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:32+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:06:32',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 15:55:38',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:06:32+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:06:37+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:06:38+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:06:38+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T16:06:38+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:06:38+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T16:06:44+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T16:06:47+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T16:06:51+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-08 00:00:00' AND ri.start_date <= '2019-04-15 00:00:00') OR
					(ri.end_date >= '2019-04-08 00:00:00' AND ri.end_date <= '2019-04-15 00:00:00') OR
					(ri.start_date <= '2019-04-08 00:00:00' AND ri.end_date >= '2019-04-15 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-08 00:00:00' AND bi.start_date <= '2019-04-15 00:00:00')
				OR
				(bi.end_date >= '2019-04-08 00:00:00' AND bi.end_date <= '2019-04-15 00:00:00')
				OR
				(bi.start_date <= '2019-04-08 00:00:00' AND bi.end_date >= '2019-04-15 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T16:07:02+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th') AND status_id = 1;
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th');
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:07:54',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:07:54',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:07:54+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 16:07:54' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 16:07:54' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:07:54+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:07:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:07:54',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:07:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th') AND status_id = 1;
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th');
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:08:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:08:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:08:55+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 16:08:55' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 16:08:55' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:08:55+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:08:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:08:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:08:55+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 16:09:05' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 16:09:05' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:05+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:09:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:09:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:05+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:09:06+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:09:06+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:09:06+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:09:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:08:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:09:06+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:09:06+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 16:09:07' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 16:09:07' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:07+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:09:08',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:08:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:09:08+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:09:12+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:12+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:12+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:09:12+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:09:12+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:09:12+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:15+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:09:16',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:08:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:09:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5c9c5b6252a54194366468' AND
			rs.status_id <> 2;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '916'
		ORDER BY resource_level_id, r.name;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '915';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '916';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '916';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '916';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '916';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '915';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:10:11+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '395';
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:10:16+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:10:16',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:08:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:10:16+07:00 [6290] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-04-04 16:10:36',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:08:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:10:36+07:00 [23803] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:10:36+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-04-04T16:10:36+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-04-04T16:10:36+07:00 [10313] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maosiwde' OR email = 'maosiwde') AND status_id = 1;
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maosiwde' OR email = 'maosiwde');
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'dadaaa29490fbb3be3dda4c38274329199e3a08e',
			salt = '333a31a8',
			fname = 'Siwada',
			lname = 'Deepracha',
			email = '1630201@vistec.ac.th',
			username = 'maosiwde',
			homepageId = '1',
			last_modified = '2019-04-04 16:34:00',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f33c13fc9e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:34:00',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '482';
2019-04-04T16:34:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 16:34:00' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 16:34:00' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:00+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'dadaaa29490fbb3be3dda4c38274329199e3a08e',
			salt = '333a31a8',
			fname = 'Siwada',
			lname = 'Deepracha',
			email = '1630201@vistec.ac.th',
			username = 'maosiwde',
			homepageId = '1',
			last_modified = '2019-04-04 16:34:00',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f33c13fc9e',
			language = 'en_us',
			lastlogin = '2019-04-04 16:34:00',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '482';
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('482' = -1 OR ru.user_id = '482') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:34:00+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:34:03+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T16:34:14+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-04-04T16:34:35+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T16:34:57+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:35:13+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:35:18+07:00 [23803] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-03-25 00:00:00' AND ri.start_date <= '2019-04-01 00:00:00') OR
					(ri.end_date >= '2019-03-25 00:00:00' AND ri.end_date <= '2019-04-01 00:00:00') OR
					(ri.start_date <= '2019-03-25 00:00:00' AND ri.end_date >= '2019-04-01 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-03-25 00:00:00' AND bi.start_date <= '2019-04-01 00:00:00')
				OR
				(bi.end_date >= '2019-03-25 00:00:00' AND bi.end_date <= '2019-04-01 00:00:00')
				OR
				(bi.start_date <= '2019-03-25 00:00:00' AND bi.end_date >= '2019-04-01 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:35:25+07:00 [10313] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:35:33+07:00 [6290] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maoaliph' OR email = 'maoaliph') AND status_id = 1;
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maoaliph' OR email = 'maoaliph');
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 16:35:40',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T16:35:40+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:35:40+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'jarinya' OR email = 'jarinya') AND status_id = 1;
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'jarinya' OR email = 'jarinya');
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-04-04 16:57:51',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-04-04 16:57:51',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-04-04T16:57:51+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 16:57:51' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 16:57:51' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:57:51+07:00 [10313] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-04-04 16:57:52',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-04-04 16:57:51',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('544' = -1 OR ru.user_id = '544') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:57:52+07:00 [6290] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:58:16+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:58:16+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:58:16+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:16+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T16:58:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 16:58:23' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 16:58:23' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:23+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 16:58:23',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T16:58:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:58:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T16:58:30+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T16:58:30+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T16:58:49+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 17:01:27' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 17:01:27' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:01:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 17:01:27',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T17:01:27+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:01:30+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T17:02:38+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 17:03:26' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 17:03:26' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:03:26+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 17:03:26',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T17:03:26+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:03:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:30:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:30:33+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:30:36+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:30:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:30:45+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:30:57+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:31:55+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:31:58+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:32:04+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:32:04+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:32:04+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:32:04+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:32:04+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:32:04+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:32:04+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:32:04+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:32:05+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:32:05+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:32:05+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:32:05+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:32:05+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:32:05+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:32:05+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:32:05+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:32:47+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:33:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:33:05+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:33:05+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:33:05+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:33:05+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:33:05+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:33:41+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:36:42+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:38:37+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:38:37+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:38:37+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:38:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:40:03+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:40:03+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:40:03+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:03+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:40:04+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:40:17+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:40:23+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:40:27+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-07 08:00:00' AND ri.start_date <= '2019-04-07 09:00:00') OR
					(ri.end_date >= '2019-04-07 08:00:00' AND ri.end_date <= '2019-04-07 09:00:00') OR
					(ri.start_date <= '2019-04-07 08:00:00' AND ri.end_date >= '2019-04-07 09:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-07 08:00:00' AND bi.start_date <= '2019-04-07 09:00:00')
				OR
				(bi.end_date >= '2019-04-07 08:00:00' AND bi.end_date <= '2019-04-07 09:00:00')
				OR
				(bi.start_date <= '2019-04-07 08:00:00' AND bi.end_date >= '2019-04-07 09:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 17:40:46', null, null, '0', false, 'none', '', '1', '1', '485', 'Powder mode');
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1067', '2', '1');
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '1', '1067');
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'Powder specimen holder (small diameter)', '1067');
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '1067');
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '1067');
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-07 08:00:00', '2019-04-07 09:00:00', '5ca5df2e42662478755904', '1067', null);
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1066', '485', '1');
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:40:46+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:40:48+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:41:06+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:41:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:41:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:41:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:41:18+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:41:30+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:41:33+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:41:34+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:41:39+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5ca5cfc073bcc257672359' AND
			rs.status_id <> 2;
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '1066'
		ORDER BY resource_level_id, r.name;
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '1065';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '1066';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '1066';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '1066';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '1066';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '1065';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:41:44+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 17:42:13' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 17:42:13' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:13+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 17:42:13',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T17:42:13+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:42:16+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:42:24+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 17:42:28' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 17:42:28' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:28+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 17:42:29',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T17:42:29+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:42:31+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T17:42:38+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 17:43:00' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 17:43:00' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:00+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 17:43:00',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T17:43:00+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:43:17+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T17:43:24+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 17:44:06' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 17:44:06' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 17:44:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T17:44:07+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:44:10+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T17:44:19+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 17:45:54' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 17:45:54' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:45:54+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0776ce841ead3e19086913fdb7c27ec8316eec2f',
			salt = '4e592b87',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-04-04 17:45:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-04-04 16:35:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T17:45:55+07:00 [6290] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T17:45:58+07:00 [10313] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-04-04T17:46:06+07:00 [23803] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-04-04T18:20:03+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1630303@visited.ac.th' OR email = '1630303@visited.ac.th') AND status_id = 1;
2019-04-04T18:47:00+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1630303' OR email = '1630303') AND status_id = 1;
2019-04-04T18:47:28+07:00 [10313] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'pattarawadee.t_s16@vistec.ac.th' OR email = 'pattarawadee.t_s16@vistec.ac.th') AND status_id = 1;
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vippatth' OR email = 'vippatth') AND status_id = 1;
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vippatth' OR email = 'vippatth');
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '60691fc924b5144e421ba52ff7e701ced50532d8',
			salt = '44cabaa8',
			fname = 'Pattarawadee',
			lname = 'Therdkatanyuphong',
			email = '1630303@vistec.ac.th',
			username = 'vippatth',
			homepageId = '1',
			last_modified = '2019-04-04 18:49:21',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca5ef41e48da',
			language = 'en_us',
			lastlogin = '2019-04-04 18:49:21',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '457';
2019-04-04T18:49:21+07:00 [23803] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 18:49:22' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 18:49:22' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:49:22+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '60691fc924b5144e421ba52ff7e701ced50532d8',
			salt = '44cabaa8',
			fname = 'Pattarawadee',
			lname = 'Therdkatanyuphong',
			email = '1630303@vistec.ac.th',
			username = 'vippatth',
			homepageId = '1',
			last_modified = '2019-04-04 18:49:22',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca5ef41e48da',
			language = 'en_us',
			lastlogin = '2019-04-04 18:49:21',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '457';
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T18:49:22+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 18:49:41' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 18:49:41' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:49:41+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '60691fc924b5144e421ba52ff7e701ced50532d8',
			salt = '44cabaa8',
			fname = 'Pattarawadee',
			lname = 'Therdkatanyuphong',
			email = '1630303@vistec.ac.th',
			username = 'vippatth',
			homepageId = '1',
			last_modified = '2019-04-04 18:49:42',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca5ef41e48da',
			language = 'en_us',
			lastlogin = '2019-04-04 18:49:21',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '457';
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T18:49:42+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T18:50:06+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:50:16+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:50:24+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:50:31+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:50:34+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:50:54+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:51:00+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:51:00+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:00+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:00+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T18:51:00+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:51:00+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:51:01+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:51:01+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:51:01+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:51:01+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:51:01+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:51:01+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:51:01+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:51:05+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:51:05+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '28';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '28';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '28';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 21:00:00' AND ri.start_date <= '2019-04-05 01:00:00') OR
					(ri.end_date >= '2019-04-04 21:00:00' AND ri.end_date <= '2019-04-05 01:00:00') OR
					(ri.start_date <= '2019-04-04 21:00:00' AND ri.end_date >= '2019-04-05 01:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-04 21:00:00' AND bi.start_date <= '2019-04-05 01:00:00')
				OR
				(bi.end_date >= '2019-04-04 21:00:00' AND bi.end_date <= '2019-04-05 01:00:00')
				OR
				(bi.start_date <= '2019-04-04 21:00:00' AND bi.end_date >= '2019-04-05 01:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '22';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 18:51:29' AND ri.start_date <= '2019-04-06 00:00:00') OR
					(ri.end_date >= '2019-04-04 18:51:29' AND ri.end_date <= '2019-04-06 00:00:00') OR
					(ri.start_date <= '2019-04-04 18:51:29' AND ri.end_date >= '2019-04-06 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 18:51:29', null, null, '0', false, 'none', '', '1', '1', '457', null);
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1068', '28', '1');
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-04 21:00:00', '2019-04-05 01:00:00', '5ca5efc1b8a90647747285', '1068', null);
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1067', '457', '1');
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:51:29+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:51:31+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:51:38+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-04-04T18:51:43+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T18:51:58+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T18:52:06+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:52:19+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '16';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '16';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '16';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-06 10:00:00' AND ri.start_date <= '2019-04-06 12:00:00') OR
					(ri.end_date >= '2019-04-06 10:00:00' AND ri.end_date <= '2019-04-06 12:00:00') OR
					(ri.start_date <= '2019-04-06 10:00:00' AND ri.end_date >= '2019-04-06 12:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-06 10:00:00' AND bi.start_date <= '2019-04-06 12:00:00')
				OR
				(bi.end_date >= '2019-04-06 10:00:00' AND bi.end_date <= '2019-04-06 12:00:00')
				OR
				(bi.start_date <= '2019-04-06 10:00:00' AND bi.end_date >= '2019-04-06 12:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '13';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-04 18:53:02' AND ri.start_date <= '2019-04-07 00:00:00') OR
					(ri.end_date >= '2019-04-04 18:53:02' AND ri.end_date <= '2019-04-07 00:00:00') OR
					(ri.start_date <= '2019-04-04 18:53:02' AND ri.end_date >= '2019-04-07 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-04-04 18:53:02', null, null, '0', false, 'none', '', '1', '1', '457', null);
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('1069', '16', '1');
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('28', '1', 'All', '1069');
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('47', '1', '4', '1069');
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('48', '1', '', '1069');
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-04-06 10:00:00', '2019-04-06 12:00:00', '5ca5f01e90beb723627665', '1069', null);
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('1068', '457', '1');
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:53:02+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-04-04T18:53:04+07:00 [10313] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:53:20+07:00 [23803] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '60691fc924b5144e421ba52ff7e701ced50532d8',
			salt = '44cabaa8',
			fname = 'Pattarawadee',
			lname = 'Therdkatanyuphong',
			email = '1630303@vistec.ac.th',
			username = 'vippatth',
			homepageId = '1',
			last_modified = '2019-04-04 18:53:20',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca5ef41e48da',
			language = 'en_us',
			lastlogin = '2019-04-04 18:49:21',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '457';
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T18:53:20+07:00 [6290] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosnutph' OR email = 'mosnutph') AND status_id = 1;
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosnutph' OR email = 'mosnutph');
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea53a08b892e914b701831f5408698e473f37980',
			salt = '1bf5cd21',
			fname = 'Nutthaphon',
			lname = 'Phattharasupakun',
			email = 's15_nutthaphon.p@vistec.ac.th',
			username = 'mosnutph',
			homepageId = '1',
			last_modified = '2019-04-04 20:57:21',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efe9966332',
			language = 'en_us',
			lastlogin = '2019-04-04 20:57:21',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '512';
2019-04-04T20:57:21+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 20:57:21' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 20:57:21' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:21+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '512';
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '512';
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '512' AND (null is null OR r.role_level IN (null) );
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '512';
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '512';
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ea53a08b892e914b701831f5408698e473f37980',
			salt = '1bf5cd21',
			fname = 'Nutthaphon',
			lname = 'Phattharasupakun',
			email = 's15_nutthaphon.p@vistec.ac.th',
			username = 'mosnutph',
			homepageId = '1',
			last_modified = '2019-04-04 20:57:22',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8efe9966332',
			language = 'en_us',
			lastlogin = '2019-04-04 20:57:21',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '512';
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('512' = -1 OR ru.user_id = '512') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T20:57:22+07:00 [23803] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T20:57:23+07:00 [6290] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '512' AND r.resource_id = urp.resource_id;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '512' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '512');
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-04-04T20:57:29+07:00 [10313] DEBUG sql - [User=Nutthaphon Phattharasupakun (s15_nutthaphon.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosphiph' OR email = 'mosphiph') AND status_id = 1;
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosphiph' OR email = 'mosphiph');
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '534';
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '534' AND (null is null OR r.role_level IN (null) );
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '534';
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '534';
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '4124c60bacee4f435d1f8cf48e681244f187264e',
			salt = '5193daef',
			fname = 'Phitchayapha',
			lname = 'Phattharaphuti',
			email = 'tangpphuti@gmail.com',
			username = 'mosphiph',
			homepageId = '1',
			last_modified = '2019-04-04 23:51:23',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c909b837f9d4',
			language = 'en_us',
			lastlogin = '2019-04-04 23:51:23',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '534';
2019-04-04T23:51:23+07:00 [6290] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-04-04 23:51:24' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-04-04 23:51:24' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '534' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '534')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '534');
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '534';
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '534';
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '534' AND (null is null OR r.role_level IN (null) );
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '534';
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '534';
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:24+07:00 [10313] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '534';
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '534';
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '534' AND (null is null OR r.role_level IN (null) );
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '534';
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '534';
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '4124c60bacee4f435d1f8cf48e681244f187264e',
			salt = '5193daef',
			fname = 'Phitchayapha',
			lname = 'Phattharaphuti',
			email = 'tangpphuti@gmail.com',
			username = 'mosphiph',
			homepageId = '1',
			last_modified = '2019-04-04 23:51:24',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c909b837f9d4',
			language = 'en_us',
			lastlogin = '2019-04-04 23:51:23',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '534';
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-05-14 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-05-14 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-05-14 00:00:00')) AND
					('534' = -1 OR ru.user_id = '534') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-04-04T23:51:24+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '534' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '534')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '534');
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T23:51:34+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '534' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '534')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '534');
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-04-01 00:00:00' AND ri.start_date <= '2019-04-08 00:00:00') OR
					(ri.end_date >= '2019-04-01 00:00:00' AND ri.end_date <= '2019-04-08 00:00:00') OR
					(ri.start_date <= '2019-04-01 00:00:00' AND ri.end_date >= '2019-04-08 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-04-01 00:00:00' AND bi.start_date <= '2019-04-08 00:00:00')
				OR
				(bi.end_date >= '2019-04-01 00:00:00' AND bi.end_date <= '2019-04-08 00:00:00')
				OR
				(bi.start_date <= '2019-04-01 00:00:00' AND bi.end_date >= '2019-04-08 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T23:51:43+07:00 [23803] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '534';
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '534';
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '534' AND (null is null OR r.role_level IN (null) );
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '534';
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '534';
2019-04-04T23:51:51+07:00 [6290] DEBUG sql - [User=Phitchayapha Phattharaphuti (tangpphuti@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '534';
